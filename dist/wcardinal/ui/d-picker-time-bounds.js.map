{"version":3,"file":"d-picker-time-bounds.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-picker-time-bounds.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\r\nimport { DPickerTimeBound, DPickerTimeBoundOptions } from \"./d-picker-time-bound\";\r\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\r\nimport { DPickerTimeBoundHours } from \"./d-picker-time-bound-hours\";\r\nimport { DPickerTimeBoundMinutes } from \"./d-picker-time-bound-minutes\";\r\nimport { DPickerTimeBoundSeconds } from \"./d-picker-time-bound-seconds\";\r\n\r\nexport interface DPickerTimeBoundsOptions {\r\n\tlower?: DPickerTimeBoundOptions;\r\n\tupper?: DPickerTimeBoundOptions;\r\n}\r\n\r\nexport class DPickerTimeBounds {\r\n\tlower: DPickerTimeBound;\r\n\tupper: DPickerTimeBound;\r\n\tmask: DPickerDatetimeMask;\r\n\thours: DPickerTimeBoundHours;\r\n\tminutes: DPickerTimeBoundMinutes;\r\n\tseconds: DPickerTimeBoundSeconds;\r\n\tconstant: DPickerTimeBoundConstant;\r\n\r\n\tconstructor( options: DPickerTimeBoundsOptions | undefined, onChange: () => void ) {\r\n\t\tthis.constant = this.newConstant();\r\n\t\tthis.lower = new DPickerTimeBound( options && options.lower, onChange );\r\n\t\tthis.upper = new DPickerTimeBound( options && options.upper, onChange );\r\n\t\tthis.mask = DPickerDatetimeMask.ALL;\r\n\t\tthis.hours = new DPickerTimeBoundHours( this );\r\n\t\tthis.minutes = new DPickerTimeBoundMinutes( this );\r\n\t\tthis.seconds = new DPickerTimeBoundSeconds( this );\r\n\t}\r\n\r\n\tnewConstant(): DPickerTimeBoundConstant {\r\n\t\treturn {\r\n\t\t\tsecond: {\r\n\t\t\t\tmin: 0,\r\n\t\t\t\tmax: 59\r\n\t\t\t},\r\n\r\n\t\t\tminute: {\r\n\t\t\t\tmin: 0,\r\n\t\t\t\tmax: 59\r\n\t\t\t},\r\n\r\n\t\t\thour: {\r\n\t\t\t\tmin: 0,\r\n\t\t\t\tmax: 23\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tadjust( date: Date ): boolean {\r\n\t\tconst result = this.test( date );\r\n\t\tif( result < 0 ) {\r\n\t\t\tconst lower = this.lower;\r\n\t\t\tconst lowerDate = lower.date;\r\n\t\t\tif( lowerDate ) {\r\n\t\t\t\tdate.setTime( lowerDate.getTime() );\r\n\t\t\t\tif( ! lower.inclusive ) {\r\n\t\t\t\t\tconst mask = this.mask;\r\n\t\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\r\n\t\t\t\t\t\tdate.setSeconds( lowerDate.getSeconds() + 1 );\r\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.MINUTES ) {\r\n\t\t\t\t\t\tdate.setMinutes( lowerDate.getMinutes() + 1 );\r\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.HOURS ) {\r\n\t\t\t\t\t\tdate.setHours( lowerDate.getHours() + 1 );\r\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.DATE ) {\r\n\t\t\t\t\t\tdate.setDate( lowerDate.getDate() + 1 );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if( 0 < result ) {\r\n\t\t\tconst upper = this.upper;\r\n\t\t\tconst upperDate = upper.date;\r\n\t\t\tif( upperDate ) {\r\n\t\t\t\tdate.setTime( upperDate.getTime() );\r\n\t\t\t\tif( ! upper.inclusive ) {\r\n\t\t\t\t\tconst mask = this.mask;\r\n\t\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\r\n\t\t\t\t\t\tdate.setSeconds( upperDate.getSeconds() - 1 );\r\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.MINUTES ) {\r\n\t\t\t\t\t\tdate.setMinutes( upperDate.getMinutes() - 1 );\r\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.HOURS ) {\r\n\t\t\t\t\t\tdate.setHours( upperDate.getHours() - 1 );\r\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.DATE ) {\r\n\t\t\t\t\t\tdate.setDate( upperDate.getDate() - 1 );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcompare( a: Date, b: Date ): number {\r\n\t\tconst mask = this.mask;\r\n\t\tif( mask & DPickerDatetimeMask.DATE ) {\r\n\t\t\tconst ay = a.getFullYear();\r\n\t\t\tconst by = b.getFullYear();\r\n\t\t\tif( ay !== by ) {\r\n\t\t\t\treturn ( ay < by ? -1 : +1 );\r\n\t\t\t}\r\n\r\n\t\t\tconst am = a.getMonth();\r\n\t\t\tconst bm = b.getMonth();\r\n\t\t\tif( am !== bm ) {\r\n\t\t\t\treturn ( am < bm ? -1 : +1 );\r\n\t\t\t}\r\n\r\n\t\t\tconst ad = a.getDate();\r\n\t\t\tconst bd = b.getDate();\r\n\t\t\tif( ad !== bd ) {\r\n\t\t\t\treturn ( ad < bd ? -1 : +1 );\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( mask & DPickerDatetimeMask.HOURS ) {\r\n\t\t\tconst ah = a.getHours();\r\n\t\t\tconst bh = b.getHours();\r\n\t\t\tif( ah !== bh ) {\r\n\t\t\t\treturn ( ah < bh ? -1 : +1 );\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\r\n\t\t\tconst am = a.getMinutes();\r\n\t\t\tconst bm = b.getMinutes();\r\n\t\t\tif( am !== bm ) {\r\n\t\t\t\treturn ( am < bm ? -1 : +1 );\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\r\n\t\t\tconst ad = a.getSeconds();\r\n\t\t\tconst bd = b.getSeconds();\r\n\t\t\tif( ad !== bd ) {\r\n\t\t\t\treturn ( ad < bd ? -1 : +1 );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\ttest( date: Date ): number {\r\n\t\t// Lower bound\r\n\t\tconst lower = this.lower;\r\n\t\tconst lowerDate = lower.date;\r\n\t\tif( lowerDate != null ) {\r\n\t\t\tconst result = this.compare( lowerDate, date );\r\n\t\t\tif( lower.inclusive ) {\r\n\t\t\t\treturn ( result <= 0 ? 0 : -1 );\r\n\t\t\t} else {\r\n\t\t\t\treturn ( result < 0 ? 0 : -1 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Upper bound\r\n\t\tconst upper = this.upper;\r\n\t\tconst upperDate = upper.date;\r\n\t\tif( upperDate != null ) {\r\n\t\t\tconst result = this.compare( date, upperDate );\r\n\t\t\tif( upper.inclusive ) {\r\n\t\t\t\treturn ( result <= 0 ? 0 : +1 );\r\n\t\t\t} else {\r\n\t\t\t\treturn ( result < 0 ? 0 : +1 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tcontains( date: Date ): boolean {\r\n\t\treturn this.test( date ) === 0;\r\n\t}\r\n}\r\n"]}