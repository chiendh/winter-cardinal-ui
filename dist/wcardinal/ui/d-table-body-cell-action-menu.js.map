{"version":3,"file":"d-table-body-cell-action-menu.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-table-body-cell-action-menu.ts"],"names":[],"mappings":"AAAA;;;GAGG;;AAEH,OAAO,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AAC5C,OAAO,EAAE,SAAS,EAAoC,MAAM,cAAc,CAAC;AAE3E,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AAcvD;IAIU,4CAAkC;IAQ3C,kCAAa,OAAgB;eAC5B,kBAAO,OAAO,CAAE;IACjB,CAAC;IAES,uCAAI,GAAd,UAAgB,OAAgB;QAAhC,iBAYC;QAXA,iBAAM,IAAI,YAAE,OAAO,CAAE,CAAC;QACtB,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC;QACjC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,gBAAgB,GAAG,UAAE,QAAiB;YAC1C,KAAI,CAAC,UAAU,CAAE,QAAQ,CAAE,CAAC;QAC7B,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,GAAG;YACrB,KAAI,CAAC,QAAQ,EAAE,CAAC;QACjB,CAAC,CAAC;IACH,CAAC;IAES,6CAAU,GAApB,UAAsB,QAAiB;QACtC,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QACpC,IAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,IAAI,GAAG,KAAK,SAAS,EAAG;YACvB,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;YAChC,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACtC,UAAU,CAAC,MAAM,CAAE,GAAG,EAAE,WAAW,EAAE,QAAQ,CAAE,CAAC;YAChD,IAAI,CAAC,IAAI,CAAE,YAAY,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAE,CAAC;SAC5E;IACF,CAAC;IAES,2CAAQ,GAAlB;QACC,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,CAAC,GAAG,CAAE,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAE,CAAC;QAC5C,IAAI,CAAC,GAAG,CAAE,OAAO,EAAE,IAAI,CAAC,cAAc,CAAE,CAAC;IAC1C,CAAC;IAED,wCAAK,GAAL;QACC,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,CAAC,EAAE,CAAE,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAE,CAAC;QAC3C,IAAI,CAAC,EAAE,CAAE,OAAO,EAAE,IAAI,CAAC,cAAc,CAAE,CAAC;QACxC,iBAAM,KAAK,WAAE,CAAC;IACf,CAAC;IAES,6CAAU,GAApB,UAAsB,UAAsB,EAAE,WAAuB;QACpE,OAAO,iBAAM,UAAU,YAAE,UAAU,EAAE,WAAW,CAAE;YACjD,CAAE,WAAW,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAE,CAAC;IAC9E,CAAC;IAED,sCAAG,GAAH,UACC,KAAc,EAAE,GAAQ,EAAE,YAAqB,EAC/C,QAAgB,EAAE,WAAmB,EACrC,QAAkB;QAElB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,IAAI,GAAG,KAAY,CAAC;QAEzB,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QACpC,eAAe,CAAC,WAAW,CAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,CAAE,CAAC;QAClE,eAAe,CAAC,aAAa,CAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,CAAE,CAAC;IACrE,CAAC;IAED,wCAAK,GAAL;QACC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;IACvB,CAAC;IAES,0CAAO,GAAjB;QACC,OAAO,0BAA0B,CAAC;IACnC,CAAC;IACF,+BAAC;AAAD,CAAC,AAhFD,CAIU,SAAS,GA4ElB","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DBaseState } from \"./d-base-state\";\r\nimport { DDropdown, DDropdownOptions, DThemeDropdown } from \"./d-dropdown\";\r\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\r\nimport { DTableBodyCells } from \"./d-table-body-cells\";\r\nimport { DTableColumn } from \"./d-table-column\";\r\n\r\nexport interface DTableBodyCellActionMenuOptions<\r\n\tROW = unknown,\r\n\tTHEME extends DThemeTableBodyCellActionMenu = DThemeTableBodyCellActionMenu\r\n> extends DDropdownOptions<unknown, THEME>, DTableBodyCellOptions<ROW> {\r\n\r\n}\r\n\r\nexport interface DThemeTableBodyCellActionMenu extends DThemeDropdown {\r\n\r\n}\r\n\r\nexport class DTableBodyCellActionMenu<\r\n\tROW = unknown,\r\n\tTHEME extends DThemeTableBodyCellActionMenu = DThemeTableBodyCellActionMenu,\r\n\tOPTIONS extends DTableBodyCellActionMenuOptions<ROW, THEME> = DTableBodyCellActionMenuOptions<ROW, THEME>\r\n> extends DDropdown<unknown, THEME, OPTIONS> implements DTableBodyCell<ROW> {\r\n\tprotected _row?: ROW;\r\n\tprotected _rowIndex!: number;\r\n\tprotected _columnIndex!: number;\r\n\tprotected _columnData!: DTableColumn<ROW>;\r\n\tprotected _onSelectedBound!: ( selected: unknown ) => void;\r\n\tprotected _onClosedBound!: () => void;\r\n\r\n\tconstructor( options: OPTIONS ) {\r\n\t\tsuper( options );\r\n\t}\r\n\r\n\tprotected init( options: OPTIONS ) {\r\n\t\tsuper.init( options );\r\n\t\tconst column = options.column;\r\n\t\tthis._rowIndex = 0;\r\n\t\tthis._columnIndex = column.index;\r\n\t\tthis._columnData = column.data;\r\n\t\tthis._onSelectedBound = ( selected: unknown ): void => {\r\n\t\t\tthis.onSelected( selected );\r\n\t\t};\r\n\t\tthis._onClosedBound = (): void => {\r\n\t\t\tthis.onClosed();\r\n\t\t};\r\n\t}\r\n\r\n\tprotected onSelected( selected: unknown ): void {\r\n\t\tconst columnData = this._columnData;\r\n\t\tconst row = this._row;\r\n\t\tif( row !== undefined ) {\r\n\t\t\tconst rowIndex = this._rowIndex;\r\n\t\t\tconst columnIndex = this._columnIndex;\r\n\t\t\tcolumnData.setter( row, columnIndex, selected );\r\n\t\t\tthis.emit( \"cellchange\", selected, null, row, rowIndex, columnIndex, this );\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onClosed(): void {\r\n\t\tconst menu = this.menu;\r\n\t\tmenu.off( \"select\", this._onSelectedBound );\r\n\t\tmenu.off( \"close\", this._onClosedBound );\r\n\t}\r\n\r\n\tstart(): void {\r\n\t\tconst menu = this.menu;\r\n\t\tmenu.on( \"select\", this._onSelectedBound );\r\n\t\tmenu.on( \"close\", this._onClosedBound );\r\n\t\tsuper.start();\r\n\t}\r\n\r\n\tprotected mergeState( stateLocal: DBaseState, stateParent: DBaseState ): DBaseState {\r\n\t\treturn super.mergeState( stateLocal, stateParent ) |\r\n\t\t\t( stateParent & DBaseState.HOVERED ? DBaseState.HOVERED : DBaseState.NONE );\r\n\t}\r\n\r\n\tset(\r\n\t\tvalue: unknown, row: ROW, supplimental: unknown,\r\n\t\trowIndex: number, columnIndex: number,\r\n\t\tforcibly?: boolean\r\n\t): void {\r\n\t\tthis._row = row;\r\n\t\tthis._rowIndex = rowIndex;\r\n\t\tthis.text = value as any;\r\n\r\n\t\tconst columnData = this._columnData;\r\n\t\tDTableBodyCells.setReadOnly( this, row, columnIndex, columnData );\r\n\t\tDTableBodyCells.setRenderable( this, row, columnIndex, columnData );\r\n\t}\r\n\r\n\tunset(): void {\r\n\t\tthis._row = undefined;\r\n\t}\r\n\r\n\tprotected getType(): string {\r\n\t\treturn \"DTableBodyCellActionMenu\";\r\n\t}\r\n}\r\n"]}