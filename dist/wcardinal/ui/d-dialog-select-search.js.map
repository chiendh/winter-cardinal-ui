{"version":3,"file":"d-dialog-select-search.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-dialog-select-search.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAEhC;IAAuD,sCAAkB;IAMxE,4BAAa,MAAqD;QAAlE,YACC,iBAAO,SAMP;QAJA,KAAI,CAAC,OAAO,GAAG,MAAM,IAAI,CAAC,UAAE,CAAS,IAAM,OAAA,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,EAAnB,CAAmB,CAAC,CAAC;QAChE,KAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,KAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;IACrB,CAAC;IAED,mCAAM,GAAN,UAAQ,IAAgB;QAAxB,iBAkBC;QAjBA,IAAM,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC;QACtB,IAAI,CAAC,OAAO,CAAE,IAAI,CAAE,CAAC,CAAE,CAAE,CAAC,IAAI,CAAC,UAAE,YAA6B;YAC7D,IAAI,KAAI,CAAC,GAAG,KAAK,EAAE,EAAG;gBACrB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gBACvB,KAAI,CAAC,OAAO,GAAG,YAAY,CAAC;gBAC5B,KAAI,CAAC,IAAI,CAAE,SAAS,EAAE,KAAI,EAAE,YAAY,CAAE,CAAC;gBAC3C,KAAI,CAAC,IAAI,CAAE,QAAQ,EAAE,KAAI,CAAE,CAAC;aAC5B;QACF,CAAC,EAAE;YACF,IAAI,KAAI,CAAC,GAAG,KAAK,EAAE,EAAG;gBACrB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gBACvB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAI,CAAC,IAAI,CAAE,MAAM,EAAE,KAAI,CAAE,CAAC;gBAC1B,KAAI,CAAC,IAAI,CAAE,QAAQ,EAAE,KAAI,CAAE,CAAC;aAC5B;QACF,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAE,QAAQ,EAAE,IAAI,CAAE,CAAC;IAC7B,CAAC;IAED,mCAAM,GAAN;QACC,OAAO,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,YAAY,CAAC;IACvC,CAAC;IAED,sCAAS,GAAT;QACC,OAAO,IAAI,CAAC,OAAO,CAAC;IACrB,CAAC;IACF,yBAAC;AAAD,CAAC,AA1CD,CAAuD,KAAK,CAAC,YAAY,GA0CxE","sourcesContent":["import { utils } from \"pixi.js\";\r\n\r\nexport class DDialogSelectSearh<SEARCH_RESULT> extends utils.EventEmitter {\r\n\tprotected _search: ( word: string ) => Promise<SEARCH_RESULT[]>;\r\n\tprotected _id: number;\r\n\tprotected _idCompleted: number;\r\n\tprotected _result: SEARCH_RESULT[] | null;\r\n\r\n\tconstructor( search?: ( word: string ) => Promise<SEARCH_RESULT[]> ) {\r\n\t\tsuper();\r\n\r\n\t\tthis._search = search || (( _: string ) => Promise.resolve([]));\r\n\t\tthis._id = 0;\r\n\t\tthis._idCompleted = 0;\r\n\t\tthis._result = null;\r\n\t}\r\n\r\n\tcreate( args: [ string ] ): void {\r\n\t\tconst id = ++this._id;\r\n\t\tthis._search( args[ 0 ] ).then(( searchResult: SEARCH_RESULT[] ) => {\r\n\t\t\tif( this._id === id ) {\r\n\t\t\t\tthis._idCompleted = id;\r\n\t\t\t\tthis._result = searchResult;\r\n\t\t\t\tthis.emit( \"success\", this, searchResult );\r\n\t\t\t\tthis.emit( \"change\", this );\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tif( this._id === id ) {\r\n\t\t\t\tthis._idCompleted = id;\r\n\t\t\t\tthis._result = null;\r\n\t\t\t\tthis.emit( \"fail\", this );\r\n\t\t\t\tthis.emit( \"change\", this );\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.emit( \"change\", this );\r\n\t}\r\n\r\n\tisDone(): boolean {\r\n\t\treturn this._id === this._idCompleted;\r\n\t}\r\n\r\n\tgetResult(): SEARCH_RESULT[] | null {\r\n\t\treturn this._result;\r\n\t}\r\n}\r\n"]}