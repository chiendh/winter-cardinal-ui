{"version":3,"file":"d-diagram-tag.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-diagram-tag.ts"],"names":[],"mappings":"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","sourcesContent":["import { DDiagramCanvasTagMap } from \"./d-diagram-canvas-tag-map\";\r\nimport { EShapeTagValueRangeType } from \"./shape/e-shape-tag-value-range\";\r\n\r\nexport interface DDiagramTagCanvas {\r\n\ttags: DDiagramCanvasTagMap;\r\n}\r\n\r\nexport interface DDiagramTagDiagram {\r\n\tcanvas: DDiagramTagCanvas | null;\r\n}\r\n\r\n/**\r\n * A tag helper class for diagrams.\r\n */\r\nexport class DDiagramTag {\r\n\tprotected _diagram: DDiagramTagDiagram;\r\n\r\n\tconstructor( diagram: DDiagramTagDiagram ) {\r\n\t\tthis._diagram = diagram;\r\n\t}\r\n\r\n\tupdate(): void {\r\n\t\t// DO NOTHING\r\n\t}\r\n\r\n\tgetIds(): string[] {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\treturn Object.keys( canvas.tags );\r\n\t\t}\r\n\t\treturn [];\r\n\t}\r\n\r\n\teach( callback: ( tagId: string ) => (boolean | void) ): string | null {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tags = canvas.tags;\r\n\t\t\tfor( const id in tags ) {\r\n\t\t\t\tif( callback( id ) === false ) {\r\n\t\t\t\t\treturn id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tset( id: string, value: unknown, time?: number, from?: number | null, to?: number | null ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\tconst tagValue = tagValues[ i ];\r\n\t\t\t\t\tconst range = tagValue.range;\r\n\r\n\t\t\t\t\t// Range\r\n\t\t\t\t\trange.set( from, to );\r\n\r\n\t\t\t\t\t// Time\r\n\t\t\t\t\tif( time !== undefined ) {\r\n\t\t\t\t\t\ttagValue.time = time;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Value\r\n\t\t\t\t\ttagValue.value = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclear( id: string ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\ttagValues[ i ].clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetAll( id: string, values: unknown[], times?: number[], from?: number | null, to?: number | null ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\tconst tagValue = tagValues[ i ];\r\n\t\t\t\t\tconst range = tagValue.range;\r\n\r\n\t\t\t\t\t// Range\r\n\t\t\t\t\trange.set( from, to );\r\n\r\n\t\t\t\t\t// Time\r\n\t\t\t\t\tif( times !== undefined ) {\r\n\t\t\t\t\t\ttagValue.times = times;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Value\r\n\t\t\t\t\ttagValue.values = values;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetValue( id: string, value: unknown, time?: number ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\tconst tagValue = tagValues[ i ];\r\n\r\n\t\t\t\t\tif( time !== undefined ) {\r\n\t\t\t\t\t\ttagValue.time = time;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttagValue.value = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetValues( id: string, values: unknown[], times?: number[] ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\tconst tagValue = tagValues[ i ];\r\n\r\n\t\t\t\t\tif( times !== undefined ) {\r\n\t\t\t\t\t\ttagValue.times = times;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttagValue.values = values;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetTime( id: string, time: number ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\ttagValues[ i ].time = time;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetTimes( id: string, times: number[] ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\ttagValues[ i ].times = times;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetRange( id: string, from?: number | null, to?: number | null ): void {\r\n\t\tconst canvas = this._diagram.canvas;\r\n\t\tif( canvas != null ) {\r\n\t\t\tconst tagValues = canvas.tags[ id ];\r\n\t\t\tif( tagValues != null ) {\r\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\r\n\t\t\t\t\tconst range = tagValues[ i ].range;\r\n\t\t\t\t\tif( from !== undefined ) {\r\n\t\t\t\t\t\tif( from !== null ) {\r\n\t\t\t\t\t\t\trange.type |= EShapeTagValueRangeType.FROM;\r\n\t\t\t\t\t\t\trange.from = from;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trange.type &= ~EShapeTagValueRangeType.FROM;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( to !== undefined ) {\r\n\t\t\t\t\t\tif( to !== null ) {\r\n\t\t\t\t\t\t\trange.type |= EShapeTagValueRangeType.TO;\r\n\t\t\t\t\t\t\trange.to = to;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trange.type &= ~EShapeTagValueRangeType.TO;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}