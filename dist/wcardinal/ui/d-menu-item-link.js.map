{"version":3,"file":"d-menu-item-link.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-menu-item-link.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { interaction } from \"pixi.js\";\r\nimport { DBaseState } from \"./d-base-state\";\r\nimport { DLink, DLinkChecker, DLinkOptions, DLinkUrlMaker, DThemeLink } from \"./d-link\";\r\nimport { DLinkMenuItemId } from \"./d-link-menu-item-id\";\r\nimport { DLinkTarget } from \"./d-link-target\";\r\nimport { DMenu, DMenuOptions } from \"./d-menu\";\r\nimport { DMenuItemLinkState } from \"./d-menu-item-link-state\";\r\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\r\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\r\nimport { isString } from \"./util/is-string\";\r\n\r\nexport type DMenuItemLinkUrlMaker = ( item: DMenuItemLink ) => string | null | Promise<string | null>;\r\nexport type DMenuItemLinkChecker = ( item: DMenuItemLink ) => boolean | Promise<boolean>;\r\n\r\nexport interface DMenuItemLinkOptions<\r\n\tVALUE = unknown,\r\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink\r\n> extends DMenuItemTextOptions<VALUE, THEME> {\r\n\turl?: string | DMenuItemLinkUrlMaker;\r\n\ttarget?: DLinkTarget;\r\n\tchecker?: DMenuItemLinkChecker;\r\n\tmenu?: DMenuOptions<DLinkMenuItemId> | DMenu<DLinkMenuItemId>;\r\n}\r\n\r\nexport interface DThemeMenuItemLink extends DThemeMenuItemText, DThemeLink {\r\n\r\n}\r\n\r\nexport class DMenuItemLink<\r\n\tVALUE = unknown,\r\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\r\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\r\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\r\n\tprotected _link!: DLink;\r\n\r\n\tconstructor( options?: OPTIONS ) {\r\n\t\tsuper( options );\r\n\t}\r\n\r\n\tprotected toLinkOptions( options?: OPTIONS ): DLinkOptions | undefined {\r\n\t\tif( options ) {\r\n\t\t\treturn {\r\n\t\t\t\turl: this.toUrl( options.url ),\r\n\t\t\t\ttarget: options.target,\r\n\t\t\t\tchecker: this.toChecker( options.checker ),\r\n\t\t\t\tmenu: options.menu\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tprotected toUrl( url?: string | DMenuItemLinkUrlMaker ): string | DLinkUrlMaker | undefined {\r\n\t\tif( isString( url ) || url == null ) {\r\n\t\t\treturn url;\r\n\t\t} else {\r\n\t\t\treturn () => {\r\n\t\t\t\treturn url( this );\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tprotected toChecker( checker?: DMenuItemLinkChecker ): DLinkChecker | undefined {\r\n\t\tif( checker != null ) {\r\n\t\t\treturn () => {\r\n\t\t\t\treturn checker( this );\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tprotected init( options?: OPTIONS ): void {\r\n\t\tif( options && options.target === DLinkTarget.NEW_WINDOW ) {\r\n\t\t\toptions.state = ( options.state || DBaseState.NONE ) || DMenuItemLinkState.NEW_WINDOW;\r\n\t\t}\r\n\t\tthis._link = new DLink( this.theme, this.toLinkOptions( options ) );\r\n\t\tsuper.init( options );\r\n\t}\r\n\r\n\tget url(): string | null | Promise<string | null> {\r\n\t\treturn this._link.url;\r\n\t}\r\n\r\n\tget menu(): DMenu<DLinkMenuItemId> {\r\n\t\treturn this._link.menu;\r\n\t}\r\n\r\n\tprotected initOnClick( options?: OPTIONS ): void {\r\n\t\tthis._link.apply( this, ( e ) => this.onSelect( e ) );\r\n\t}\r\n\r\n\tprotected getType(): string {\r\n\t\treturn \"DMenuItemLink\";\r\n\t}\r\n\r\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\r\n\t\tsuper.onSelect( e );\r\n\t\tthis.open( this._link.inNewWindow( e ) );\r\n\t}\r\n\r\n\topen( inNewWindow: boolean ): void {\r\n\t\tthis._link.open( inNewWindow );\r\n\t}\r\n\r\n\tprotected onShortcut( e: KeyboardEvent ) {\r\n\t\tsuper.onShortcut( e );\r\n\t\tthis.onSelect( e );\r\n\t}\r\n\r\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemLinkOptions<VALUE> {\r\n\t\treturn \"url\" in options;\r\n\t}\r\n}\r\n"]}