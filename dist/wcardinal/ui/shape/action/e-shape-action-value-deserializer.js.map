{"version":3,"file":"e-shape-action-value-deserializer.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/action/e-shape-action-value-deserializer.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { isArray } from \"../../util/is-array\";\r\nimport { isNumber } from \"../../util/is-number\";\r\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\r\nimport { EShapeActionValue } from \"./e-shape-action-value\";\r\nimport { EShapeActionValueBlink, EShapeActionValueBlinkSerialized } from \"./e-shape-action-value-blink\";\r\nimport {\r\n\tEShapeActionValueChangeColor, EShapeActionValueChangeColorSerialized } from \"./e-shape-action-value-change-color\";\r\nimport {\r\n\tEShapeActionValueChangeColorBrightness, EShapeActionValueChangeColorBrightnessSerialized\r\n} from \"./e-shape-action-value-change-color-brightness\";\r\nimport {\r\n\tEShapeActionValueChangeColorCode, EShapeActionValueChangeColorCodeSerialized\r\n} from \"./e-shape-action-value-change-color-code\";\r\nimport { EShapeActionValueChangeColorTarget } from \"./e-shape-action-value-change-color-target\";\r\nimport {\r\n\tEShapeActionValueChangeCursor, EShapeActionValueChangeCursorSerialized } from \"./e-shape-action-value-change-cursor\";\r\nimport { EShapeActionValueChangeText, EShapeActionValueChangeTextSerialized } from \"./e-shape-action-value-change-text\";\r\nimport { EShapeActionValueEmitEvent, EShapeActionValueEmitEventSerialized } from \"./e-shape-action-value-emit-event\";\r\nimport { EShapeActionValueMisc, EShapeActionValueMiscSerialized } from \"./e-shape-action-value-misc\";\r\nimport { EShapeActionValueOpen, EShapeActionValueOpenSerialized } from \"./e-shape-action-value-open\";\r\nimport { EShapeActionValueShowHide, EShapeActionValueShowHideSerialized } from \"./e-shape-action-value-show-hide\";\r\nimport {\r\n\tEShapeActionValueShowHideType\r\n} from \"./e-shape-action-value-show-hide-type\";\r\nimport {\r\n\tEShapeActionValueTransformMove, EShapeActionValueTransformMoveSerialized\r\n} from \"./e-shape-action-value-transform-move\";\r\nimport {\r\n\tEShapeActionValueTransformResize, EShapeActionValueTransformResizeSerialized\r\n} from \"./e-shape-action-value-transform-resize\";\r\nimport {\r\n\tEShapeActionValueTransformRotate, EShapeActionValueTransformRotateSerialized\r\n} from \"./e-shape-action-value-transform-rotate\";\r\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\r\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\r\n\r\nexport type EShapeActionValueSerialized = EShapeActionValueShowHideSerialized |\r\n\tEShapeActionValueBlinkSerialized | EShapeActionValueBlinkSerialized |\r\n\tEShapeActionValueChangeColorSerialized | EShapeActionValueChangeColorCodeSerialized |\r\n\tEShapeActionValueChangeColorBrightnessSerialized | EShapeActionValueChangeTextSerialized |\r\n\tEShapeActionValueChangeCursorSerialized | EShapeActionValueEmitEventSerialized |\r\n\tEShapeActionValueOpenSerialized | EShapeActionValueTransformMoveSerialized |\r\n\tEShapeActionValueTransformResizeSerialized | EShapeActionValueTransformRotateSerialized |\r\n\tEShapeActionValueMiscSerialized;\r\n\r\nexport class EShapeActionValueDeserializer {\r\n\tstatic toSerialized( resource: string ): EShapeActionValueSerialized | null {\r\n\t\ttry {\r\n\t\t\tconst parsed = JSON.parse( resource );\r\n\t\t\tif( isArray( parsed ) ) {\r\n\t\t\t\tfor( let i = 0, imax = parsed.length; i < imax; ++i ) {\r\n\t\t\t\t\tif( ! isNumber( parsed[ i ] ) ) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif( 2 <= parsed.length ) {\r\n\t\t\t\t\treturn parsed as EShapeActionValueSerialized;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t} catch( e ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize( id: number, manager: EShapeResourceManagerDeserialization ): EShapeActionValue {\r\n\t\tconst actions = manager.actions;\r\n\t\tconst action = actions.get( id );\r\n\t\tif( action != null ) {\r\n\t\t\treturn action;\r\n\t\t}\r\n\r\n\t\tconst resources = manager.resources;\r\n\t\tconst resource = resources[ id ];\r\n\t\tif( resource != null ) {\r\n\t\t\tconst serialized = this.toSerialized( resource );\r\n\t\t\tif( serialized != null ) {\r\n\t\t\t\tswitch( serialized[ 0 ] ) {\r\n\t\t\t\tcase EShapeActionValueType.SHOW_HIDE:\r\n\t\t\t\t\treturn EShapeActionValueShowHide.deserialize( serialized, manager );\r\n\t\t\t\tcase EShapeActionValueType.BLINK:\r\n\t\t\t\t\treturn EShapeActionValueBlink.deserialize( serialized, manager );\r\n\t\t\t\tcase EShapeActionValueType.CHANGE_COLOR:\r\n\t\t\t\t\tswitch( serialized[ 3 ] ) {\r\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\r\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.COLOR:\r\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\r\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColor.deserialize( serialized, manager );\r\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.CODE:\r\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColorCode.deserialize( serialized, manager );\r\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.BRIGHTNESS:\r\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColorBrightness.deserialize( serialized, manager );\r\n\t\t\t\t\t}\r\n\t\t\t\tcase EShapeActionValueType.CHANGE_TEXT:\r\n\t\t\t\t\treturn EShapeActionValueChangeText.deserialize( serialized, manager );\r\n\t\t\t\tcase EShapeActionValueType.CHANGE_CURSOR:\r\n\t\t\t\t\treturn EShapeActionValueChangeCursor.deserialize( serialized, manager );\r\n\t\t\t\tcase EShapeActionValueType.EMIT_EVENT:\r\n\t\t\t\t\treturn EShapeActionValueEmitEvent.deserialize( serialized, manager );\r\n\t\t\t\tcase EShapeActionValueType.OPEN:\r\n\t\t\t\t\treturn EShapeActionValueOpen.deserialize( serialized, manager );\r\n\t\t\t\tcase EShapeActionValueType.TRANSFORM:\r\n\t\t\t\t\tswitch( serialized[ 2 ] ) {\r\n\t\t\t\t\tcase EShapeActionValueTransformType.MOVE:\r\n\t\t\t\t\t\treturn EShapeActionValueTransformMove.deserialize( serialized, manager );\r\n\t\t\t\t\tcase EShapeActionValueTransformType.RESIZE:\r\n\t\t\t\t\t\treturn EShapeActionValueTransformResize.deserialize( serialized, manager );\r\n\t\t\t\t\tcase EShapeActionValueTransformType.ROTATE:\r\n\t\t\t\t\t\treturn EShapeActionValueTransformRotate.deserialize( serialized, manager );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase EShapeActionValueType.MISC:\r\n\t\t\t\t\treturn EShapeActionValueMisc.deserialize( serialized, manager );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new EShapeActionValueShowHide( EShapeActionValueShowHideType.SHOW, \"\" );\r\n\t}\r\n}\r\n"]}