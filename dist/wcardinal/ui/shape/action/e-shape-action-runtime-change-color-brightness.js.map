{"version":3,"file":"e-shape-action-runtime-change-color-brightness.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { UtilRgb } from \"../../util/util-rgb\";\r\nimport { EShape } from \"../e-shape\";\r\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\r\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\r\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\r\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\r\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\r\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\r\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\r\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\r\n\r\nconst brightnessDefault = (): number | null => null;\r\n\r\nexport class EShapeActionRuntimeChangeColorBrightness extends EShapeActionRuntimeConditional {\r\n\tprotected readonly brightness: EShapeActionExpression<number | null>;\r\n\r\n\tconstructor( value: EShapeActionValueChangeColorBrightness, reset: EShapeRuntimeReset ) {\r\n\t\tsuper( value, reset );\r\n\t\tthis.brightness = this.toExpression( value.brightness, brightnessDefault, \"null\" );\r\n\t}\r\n\r\n\tprotected set(\r\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\r\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\r\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\r\n\t): void {\r\n\t\tconst brightness = this.brightness( shape, time );\r\n\t\tif( brightness != null ) {\r\n\t\t\ttarget.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( base.color, brightness ),\r\n\t\t\t\tbase.alpha\r\n\t\t\t);\r\n\t\t\truntime.written |= this.reset;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected sets(\r\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\r\n\t\tfill: EShapeFill, stroke: EShapeStroke,\r\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\r\n\t): void {\r\n\t\tconst brightness = this.brightness( shape, time );\r\n\t\tif( brightness != null ) {\r\n\t\t\tfill.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( baseFill.color, brightness ),\r\n\t\t\t\tbaseFill.alpha\r\n\t\t\t);\r\n\r\n\t\t\tstroke.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( baseStroke.color, brightness ),\r\n\t\t\t\tbaseStroke.alpha\r\n\t\t\t);\r\n\r\n\t\t\truntime.written |= this.reset;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected setAll(\r\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\r\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\r\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\r\n\t): void {\r\n\t\tconst brightness = this.brightness( shape, time );\r\n\t\tif( brightness != null ) {\r\n\t\t\tfill.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( baseFill.color, brightness ),\r\n\t\t\t\tbaseFill.alpha\r\n\t\t\t);\r\n\r\n\t\t\tstroke.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( baseStroke.color, brightness ),\r\n\t\t\t\tbaseStroke.alpha\r\n\t\t\t);\r\n\r\n\t\t\ttext.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( baseText.color, brightness ),\r\n\t\t\t\tbaseText.alpha\r\n\t\t\t);\r\n\r\n\t\t\toutline.set(\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.toColorAdjusted( baseOutline.color, brightness ),\r\n\t\t\t\tbaseOutline.alpha\r\n\t\t\t);\r\n\r\n\t\t\truntime.written |= this.reset;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected toColorAdjusted( color: number, brightness: number ): number {\r\n\t\tif( 0 <= brightness ) {\r\n\t\t\treturn UtilRgb.brighten( color, +brightness );\r\n\t\t} else {\r\n\t\t\treturn UtilRgb.darken( color, -brightness );\r\n\t\t}\r\n\t}\r\n}\r\n"]}