{"version":3,"file":"e-shape-action-runtime-transform-resize.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { EShape } from \"../e-shape\";\r\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\r\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\r\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\r\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\r\nimport { EShapeActionValueTransformResizeType } from \"./e-shape-action-value-transform-resize-type\";\r\n\r\nconst sizeRelativeDefault = (): number => 1;\r\nconst sizeAbsoluteDefault = (): number => 100;\r\n\r\nexport class EShapeActionRuntimeTransformResize extends EShapeActionRuntimeConditional {\r\n\tprotected readonly size: EShapeActionExpression<number>;\r\n\r\n\tconstructor( value: EShapeActionValueTransformResize, reset: EShapeRuntimeReset ) {\r\n\t\tsuper( value, reset );\r\n\t\tswitch( value.opetype ) {\r\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\r\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\r\n\t\t\tbreak;\r\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\r\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\r\n\t\t\tbreak;\r\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\r\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\r\n\t\t\tbreak;\r\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\r\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\r\n\t\t\tbreak;\r\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\r\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\r\n\t\t\tbreak;\r\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\r\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthis.size = sizeRelativeDefault;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected adjustPosition(\r\n\t\tshape: EShape, runtime: EShapeRuntime,\r\n\t\tdsx: number, dsy: number,\r\n\t\toriginX: number, originY: number\r\n\t): void {\r\n\t\tconst dx = ( -0.5 + originX ) * dsx;\r\n\t\tconst dy = ( -0.5 + originY ) * dsy;\r\n\t\tshape.updateTransform();\r\n\t\tconst transform = shape.transform;\r\n\t\tconst position = transform.position;\r\n\t\tconst localTransform = transform.localTransform;\r\n\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\r\n\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\r\n\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\r\n\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\r\n\t\truntime.written |= EShapeRuntimeReset.POSITION;\r\n\t\tposition.set(\r\n\t\t\toldPositionX + dx * localTransform.a + dy * localTransform.c,\r\n\t\t\toldPositionY + dx * localTransform.b + dy * localTransform.d\r\n\t\t);\r\n\t}\r\n}\r\n"]}