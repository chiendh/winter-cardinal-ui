{"version":3,"file":"e-shape-action-runtime.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/action/e-shape-action-runtime.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,gBAAgB,EAAE,MAAM,0BAA0B,CAAC;AAE5D,OAAO,EAAiB,kBAAkB,EAAE,MAAM,oBAAoB,CAAC;AAIvE;IAGC,6BAAa,KAA0B;QACtC,IAAI,CAAC,KAAK,GAAG,KAAK,IAAI,kBAAkB,CAAC,IAAI,CAAC;IAC/C,CAAC;IAED,0CAAY,GAAZ,UACC,UAAkB,EAAE,GAA8B,EAAE,UAAkB;QAEtE,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,EAAG;YACnC,OAAO,GAAG,CAAC;SACX;QAED,IAAI;YACH,OAAO,QAAQ,CACd,OAAO,EAAE,MAAM,EACf,kCAAgC,UAAU,mCAA8B,UAAU,QAAK,CAC1D,CAAC;SAC/B;QAAC,OAAO,CAAC,EAAG;YACZ,OAAO,GAAG,CAAC;SACX;IACF,CAAC;IAES,yCAAW,GAArB,UAAuB,KAAa;QACnC,IAAI,OAAO,GAAqB,KAAK,CAAC;QACtC,OAAO,OAAO,IAAI,IAAI,EAAG;YACxB,IAAI,OAAO,YAAY,gBAAgB,EAAG;gBACzC,OAAO,OAAO,CAAC;aACf;YACD,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;SACzB;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAED,qCAAO,GAAP,UAAS,KAAa,EAAE,OAAsB,EAAE,IAAY;QAC3D,gBAAgB;IACjB,CAAC;IACF,0BAAC;AAAD,CAAC,AAtCD,IAsCC","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DCanvasContainer } from \"../../d-canvas-container\";\r\nimport { EShape } from \"../e-shape\";\r\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\r\n\r\nexport type EShapeActionExpression<T> = ( shape: EShape, time: number ) => T;\r\n\r\nexport class EShapeActionRuntime {\r\n\treset: EShapeRuntimeReset;\r\n\r\n\tconstructor( reset?: EShapeRuntimeReset ) {\r\n\t\tthis.reset = reset || EShapeRuntimeReset.NONE;\r\n\t}\r\n\r\n\ttoExpression<T>(\r\n\t\texpression: string, def: EShapeActionExpression<T>, defLiteral: string\r\n\t): EShapeActionExpression<T> {\r\n\t\tif( expression.trim().length <= 0 ) {\r\n\t\t\treturn def;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\treturn Function(\r\n\t\t\t\t\"shape\", \"time\",\r\n\t\t\t\t`try{ with( shape ) { return (${expression}); } } catch( e ) { return ${defLiteral}; }`\r\n\t\t\t) as EShapeActionExpression<T>;\r\n\t\t} catch( e ) {\r\n\t\t\treturn def;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected toContainer( shape: EShape ): any | null {\r\n\t\tlet current: { parent: any; } = shape;\r\n\t\twhile( current != null ) {\r\n\t\t\tif( current instanceof DCanvasContainer ) {\r\n\t\t\t\treturn current;\r\n\t\t\t}\r\n\t\t\tcurrent = current.parent;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\r\n\t\t// OVERRIDE THIS\r\n\t}\r\n}\r\n"]}