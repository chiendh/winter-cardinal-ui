{"version":3,"file":"e-shape-renderer-iterator.js","sourceRoot":"","sources":["../../../../src/main/typescript/wcardinal/ui/shape/e-shape-renderer-iterator.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAGH,OAAO,EAAE,2BAA2B,EAAE,MAAM,mCAAmC,CAAC;AAEhF;IAMC;QACC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,IAAI,2BAA2B,EAAE,CAAC;QAChD,IAAI,CAAC,KAAK,GAAG,CAAE,IAAI,CAAC,MAAM,CAAE,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,sCAAK,GAAL,UAAO,MAAgB;QACtB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC;QAC9C,OAAO,CAAC,KAAK,CAAE,MAAM,CAAE,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,OAAO,IAAI,CAAC,IAAI,EAAE,CAAC;IACpB,CAAC;IAED,oCAAG,GAAH;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,qCAAI,GAAJ;QACC,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,IAAM,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;QAC3B,IAAI,KAAK,IAAI,IAAI,EAAG;YACnB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAG;gBACzB,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;gBACjD,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;gBACxB,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,EAAG;oBAC9B,IAAM,QAAQ,GAAG,IAAI,CAAE,UAAU,CAAE,CAAC;oBACpC,QAAQ,CAAC,KAAK,CAAE,QAAQ,CAAE,CAAC;oBAC3B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;iBACvB;qBAAM;oBACN,IAAM,QAAQ,GAAG,IAAI,2BAA2B,EAAE,CAAC;oBACnD,IAAI,CAAC,IAAI,CAAE,QAAQ,CAAE,CAAC;oBACtB,QAAQ,CAAC,KAAK,CAAE,QAAQ,CAAE,CAAC;oBAC3B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;iBACvB;aACD;YACD,OAAO,KAAK,CAAC;SACb;aAAM;YACN,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YACjD,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;YACxB,IAAI,CAAC,IAAI,UAAU,EAAG;gBACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAE,UAAU,CAAE,CAAC;gBACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,OAAO,IAAI,CAAC,IAAI,EAAE,CAAC;aACnB;iBAAM;gBACN,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,OAAO,IAAI,CAAC;aACZ;SACD;IACF,CAAC;IACF,6BAAC;AAAD,CAAC,AA3DD,IA2DC","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { EShape } from \"./e-shape\";\r\nimport { EShapeRendererIteratorDatum } from \"./e-shape-renderer-iterator-datum\";\r\n\r\nexport class EShapeRendererIterator {\r\n\tprotected _index: number;\r\n\tprotected _data: EShapeRendererIteratorDatum[];\r\n\tprotected _datum: EShapeRendererIteratorDatum;\r\n\tprotected _current: EShape | null;\r\n\r\n\tconstructor() {\r\n\t\tthis._index = -1;\r\n\t\tthis._datum = new EShapeRendererIteratorDatum();\r\n\t\tthis._data = [ this._datum ];\r\n\t\tthis._current = null;\r\n\t}\r\n\r\n\treset( shapes: EShape[] ): EShape | null {\r\n\t\tthis._index = 0;\r\n\t\tconst current = this._datum = this._data[ 0 ];\r\n\t\tcurrent.reset( shapes );\r\n\t\tthis._current = null;\r\n\t\treturn this.next();\r\n\t}\r\n\r\n\tget(): EShape | null {\r\n\t\treturn this._current;\r\n\t}\r\n\r\n\tnext(): EShape | null {\r\n\t\tconst datum = this._datum;\r\n\t\tconst shape = datum.next();\r\n\t\tif( shape != null ) {\r\n\t\t\tthis._current = shape;\r\n\t\t\tconst children = shape.children;\r\n\t\t\tif( 0 < children.length ) {\r\n\t\t\t\tconst datumIndex = this._index = this._index + 1;\r\n\t\t\t\tconst data = this._data;\r\n\t\t\t\tif( datumIndex < data.length ) {\r\n\t\t\t\t\tconst newDatum = data[ datumIndex ];\r\n\t\t\t\t\tnewDatum.reset( children );\r\n\t\t\t\t\tthis._datum = newDatum;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst newDatum = new EShapeRendererIteratorDatum();\r\n\t\t\t\t\tdata.push( newDatum );\r\n\t\t\t\t\tnewDatum.reset( children );\r\n\t\t\t\t\tthis._datum = newDatum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn shape;\r\n\t\t} else {\r\n\t\t\tconst datumIndex = this._index = this._index - 1;\r\n\t\t\tconst data = this._data;\r\n\t\t\tif( 0 <= datumIndex ) {\r\n\t\t\t\tthis._datum = data[ datumIndex ];\r\n\t\t\t\tthis._current = null;\r\n\t\t\t\treturn this.next();\r\n\t\t\t} else {\r\n\t\t\t\tthis._current = null;\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}