{"version":3,"file":"e-shape-transform.js","sourceRoot":"","sources":["../../../../src/main/typescript/wcardinal/ui/shape/e-shape-transform.ts"],"names":[],"mappings":"AAAA;;;GAGG;;AAEH,OAAO,EAAE,MAAM,EAAmB,SAAS,EAAE,MAAM,SAAS,CAAC;AAkB7D;IAAyC,uCAAS;IAIjD,6BAAa,MAA6B;QAA1C,YACC,iBAAO,SAGP;QAFA,KAAI,CAAC,iBAAiB,GAAG,IAAI,MAAM,EAAE,CAAC;QACtC,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;;IACvB,CAAC;IAES,sCAAQ,GAAlB;QACC,iBAAM,QAAQ,WAAE,CAAC;QACjB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;IAClC,CAAC;IAES,wCAAU,GAApB;QACC,iBAAM,UAAU,WAAE,CAAC;QACnB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;IAClC,CAAC;IAED,+CAAiB,GAAjB;QACC,OAAO,IAAI,CAAC,eAAe,CAAC;IAC7B,CAAC;IAED,wCAAU,GAAV;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,yCAAW,GAAX;QACC,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAED,wCAAU,GAAV;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,6CAAe,GAAf,UAAiB,eAA0B;QAC1C,IAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC;QACxC,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;QACjC,iBAAM,eAAe,YAAE,eAAe,CAAE,CAAC;QACzC,IAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC;QACxC,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;QACjC,IAAI,UAAU,KAAK,UAAU,EAAG;YAC/B,IAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;YAC3C,IAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;YACjD,cAAc,CAAC,MAAM,CAAE,iBAAiB,CAAE,CAAC;YAC3C,IAAI,eAAe,YAAY,mBAAmB,EAAG;gBACpD,iBAAiB,CAAC,OAAO,CAAE,eAAe,CAAC,iBAAiB,CAAE,CAAC;aAC/D;SACD;aAAM,IAAI,UAAU,KAAK,UAAU,EAAG;YACtC,IAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;YAC3C,IAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;YACjD,IAAI,eAAe,YAAY,mBAAmB,EAAG;gBACpD,cAAc,CAAC,MAAM,CAAE,iBAAiB,CAAE,CAAC,OAAO,CAAE,eAAe,CAAC,iBAAiB,CAAE,CAAC;gBACxF,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC;gBAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC;aACrC;SACD;IACF,CAAC;IACF,0BAAC;AAAD,CAAC,AA3DD,CAAyC,SAAS,GA2DjD","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { Matrix, ObservablePoint, Transform } from \"pixi.js\";\r\nimport { EShapeTransformParent } from \"./e-shape-transform-parent\";\r\n\r\nexport interface EShapeTransform extends Transform {\r\n\tinternalTransform: Matrix;\r\n\r\n\tposition: ObservablePoint;\r\n\tpivot: ObservablePoint;\r\n\trotation: number;\r\n\tskew: ObservablePoint;\r\n\tscale: ObservablePoint;\r\n\r\n\tgetLocalIdCurrent(): number;\r\n\tgetLocalId(): number;\r\n\tgetParentId(): number;\r\n\tgetWorldId(): number;\r\n}\r\n\r\nexport class EShapeTransformImpl extends Transform implements EShapeTransform {\r\n\tprotected _parent: EShapeTransformParent;\r\n\tinternalTransform: Matrix;\r\n\r\n\tconstructor( parent: EShapeTransformParent ) {\r\n\t\tsuper();\r\n\t\tthis.internalTransform = new Matrix();\r\n\t\tthis._parent = parent;\r\n\t}\r\n\r\n\tprotected onChange(): void {\r\n\t\tsuper.onChange();\r\n\t\tthis._parent.onTransformChange();\r\n\t}\r\n\r\n\tprotected updateSkew(): void {\r\n\t\tsuper.updateSkew();\r\n\t\tthis._parent.onTransformChange();\r\n\t}\r\n\r\n\tgetLocalIdCurrent(): number {\r\n\t\treturn this._currentLocalID;\r\n\t}\r\n\r\n\tgetLocalId(): number {\r\n\t\treturn this._localID;\r\n\t}\r\n\r\n\tgetParentId(): number {\r\n\t\treturn this._parentID;\r\n\t}\r\n\r\n\tgetWorldId(): number {\r\n\t\treturn this._worldID;\r\n\t}\r\n\r\n\tupdateTransform( parentTransform: Transform ): void {\r\n\t\tconst oldLocalId = this._currentLocalID;\r\n\t\tconst oldWorldId = this._worldID;\r\n\t\tsuper.updateTransform( parentTransform );\r\n\t\tconst newLocalId = this._currentLocalID;\r\n\t\tconst newWorldId = this._worldID;\r\n\t\tif( oldLocalId !== newLocalId ) {\r\n\t\t\tconst localTransform = this.localTransform;\r\n\t\t\tconst internalTransform = this.internalTransform;\r\n\t\t\tlocalTransform.copyTo( internalTransform );\r\n\t\t\tif( parentTransform instanceof EShapeTransformImpl ) {\r\n\t\t\t\tinternalTransform.prepend( parentTransform.internalTransform );\r\n\t\t\t}\r\n\t\t} else if( oldWorldId !== newWorldId ) {\r\n\t\t\tconst localTransform = this.localTransform;\r\n\t\t\tconst internalTransform = this.internalTransform;\r\n\t\t\tif( parentTransform instanceof EShapeTransformImpl ) {\r\n\t\t\t\tlocalTransform.copyTo( internalTransform ).prepend( parentTransform.internalTransform );\r\n\t\t\t\tthis._currentLocalID += 1;\r\n\t\t\t\tthis._localID = this._currentLocalID;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}