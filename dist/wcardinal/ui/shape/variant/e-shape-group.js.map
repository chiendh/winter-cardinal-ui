{"version":3,"file":"e-shape-group.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/e-shape-group.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { IPoint } from \"pixi.js\";\r\nimport { EShapeCorner } from \"../e-shape-corner\";\r\nimport { EShapeDefaults } from \"../e-shape-defaults\";\r\nimport { EShapeFill } from \"../e-shape-fill\";\r\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\r\nimport { EShapePoints } from \"../e-shape-points\";\r\nimport { EShapeStroke } from \"../e-shape-stroke\";\r\nimport { EShapeTag } from \"../e-shape-tag\";\r\nimport { EShapeText } from \"../e-shape-text\";\r\nimport { EShapeType } from \"../e-shape-type\";\r\nimport { EShapeBase } from \"./e-shape-base\";\r\nimport { EShapeGroupFillEditor } from \"./e-shape-group-fill-editor\";\r\nimport { EShapeGroupPoints } from \"./e-shape-group-points\";\r\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\r\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\r\nimport { EShapeGroupSizeEditor } from \"./e-shape-group-size-editor\";\r\nimport { EShapeGroupSizeViewer } from \"./e-shape-group-size-viewer\";\r\nimport { EShapeGroupStrokeEditor } from \"./e-shape-group-stroke-editor\";\r\nimport { EShapeGroupTextEditor } from \"./e-shape-group-text-editor\";\r\nimport { EShapeTagImpl } from \"./e-shape-tag-impl\";\r\n\r\nexport class EShapeGroup extends EShapeBase implements EShapeGroupPropertyParent {\r\n\tsize: EShapeGroupSize;\r\n\tfill: EShapeFill;\r\n\tstroke: EShapeStroke;\r\n\ttag: EShapeTag;\r\n\ttext: EShapeText;\r\n\r\n\tprotected _points?: EShapeGroupPoints;\r\n\r\n\tconstructor( type = EShapeType.GROUP ) {\r\n\t\tsuper( type );\r\n\t\tthis.tag = new EShapeTagImpl();\r\n\t\tthis.size = this.newGroupSize();\r\n\t\tthis.fill = this.newGroupFill();\r\n\t\tthis.stroke = this.newGroupStroke();\r\n\t\tthis.text = this.newGroupText();\r\n\t\tthis.points = this.newGroupPoints();\r\n\t}\r\n\r\n\tprotected newGroupSize(): EShapeGroupSize {\r\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\r\n\t\t\treturn new EShapeGroupSizeEditor(\r\n\t\t\t\tthis,\r\n\t\t\t\tEShapeDefaults.SIZE_X,\r\n\t\t\t\tEShapeDefaults.SIZE_Y\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tconst result = new EShapeGroupSizeViewer(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tconst base = result.base;\r\n\t\t\t\t\tthis.transform.scale.set(\r\n\t\t\t\t\t\tresult.x / base.x,\r\n\t\t\t\t\t\tresult.y / base.y\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tEShapeDefaults.SIZE_X,\r\n\t\t\t\tEShapeDefaults.SIZE_Y\r\n\t\t\t);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected newGroupFill(): EShapeFill {\r\n\t\treturn new EShapeGroupFillEditor( this );\r\n\t}\r\n\r\n\tprotected newGroupStroke(): EShapeStroke {\r\n\t\treturn new EShapeGroupStrokeEditor( this );\r\n\t}\r\n\r\n\tprotected newGroupText(): EShapeText {\r\n\t\treturn new EShapeGroupTextEditor( this );\r\n\t}\r\n\r\n\tprotected newGroupPoints(): EShapePoints | undefined {\r\n\t\treturn new EShapeGroupPoints( this );\r\n\t}\r\n\r\n\tprotected getBoundsSize(): IPoint {\r\n\t\tconst size = this.size;\r\n\t\tif( size instanceof EShapeGroupSizeViewer ) {\r\n\t\t\treturn size.base;\r\n\t\t} else {\r\n\t\t\treturn size;\r\n\t\t}\r\n\t}\r\n\r\n\tonChildTransformChange(): void {\r\n\t\tsuper.onChildTransformChange();\r\n\t\tthis.size.fit();\r\n\t}\r\n\r\n\tget corner(): EShapeCorner {\r\n\t\tconst children = this.children;\r\n\t\tif( 0 < children.length ) {\r\n\t\t\treturn children[ children.length - 1 ].corner;\r\n\t\t}\r\n\t\treturn EShapeCorner.ALL;\r\n\t}\r\n\r\n\tset corner( corner: EShapeCorner ) {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\r\n\t\t\tchildren[ i ].corner = corner;\r\n\t\t}\r\n\t}\r\n\r\n\tget cursor(): string {\r\n\t\tconst children = this.children;\r\n\t\tif( 0 < children.length ) {\r\n\t\t\treturn children[ children.length - 1 ].cursor;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tset cursor( cursor: string ) {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\r\n\t\t\tchildren[ i ].cursor = cursor;\r\n\t\t}\r\n\t}\r\n\r\n\tget gradient(): EShapeGradientLike | undefined {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\r\n\t\t\tconst gradient = children[ i ].gradient;\r\n\t\t\tif( gradient != null ) {\r\n\t\t\t\treturn gradient;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tset gradient( gradient: EShapeGradientLike | undefined ) {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\r\n\t\t\tchildren[ i ].gradient = gradient;\r\n\t\t}\r\n\t}\r\n\r\n\tget radius(): number {\r\n\t\tconst children = this.children;\r\n\t\tif( 0 < children.length ) {\r\n\t\t\treturn children[ children.length - 1 ].radius;\r\n\t\t}\r\n\t\treturn 0.5;\r\n\t}\r\n\r\n\tset radius( radius: number ) {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\r\n\t\t\tchildren[ i ].radius = radius;\r\n\t\t}\r\n\t}\r\n\r\n\tget image(): HTMLImageElement | undefined {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\r\n\t\t\tconst image = children[ i ].image;\r\n\t\t\tif( image != null ) {\r\n\t\t\t\treturn image;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tset image( image: HTMLImageElement | undefined ) {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\r\n\t\t\tchildren[ i ].image = image;\r\n\t\t}\r\n\t}\r\n\r\n\tget points(): EShapePoints | undefined {\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\r\n\t\t\tconst points = children[ i ].points;\r\n\t\t\tif( points != null ) {\r\n\t\t\t\treturn this._points;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tset points( points: EShapePoints | undefined ) {\r\n\t\t// DO NOTHING\r\n\t}\r\n\r\n\tclone(): EShapeGroup {\r\n\t\tconst constructor = this.constructor as new () => EShapeGroup;\r\n\t\tconst result = new constructor().copy( this );\r\n\t\tconst children = this.children;\r\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\r\n\t\t\tconst clone = children[ i ].clone();\r\n\t\t\tclone.parent = result;\r\n\t\t\tresult.children.push( clone );\r\n\t\t}\r\n\t\tresult.onChildTransformChange();\r\n\t\tresult.toDirty();\r\n\t\treturn result;\r\n\t}\r\n\r\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\r\n\t\treturn false;\r\n\t}\r\n}\r\n"]}