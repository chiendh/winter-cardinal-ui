{"version":3,"file":"e-shape-triangle-rounded.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/e-shape-triangle-rounded.ts"],"names":[],"mappings":"AAAA;;;GAGG;;AAEH,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AACjD,OAAO,EAAE,UAAU,EAAE,MAAM,iBAAiB,CAAC;AAC7C,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AAEpD,IAAM,IAAI,GAAG,OAAO,CAAC;AAErB;IAA2C,yCAAc;IACxD,+BAAa,IAAkC;QAAlC,qBAAA,EAAA,OAAO,UAAU,CAAC,gBAAgB;eAC9C,kBAAO,IAAI,CAAE;IACd,CAAC;IAED,qCAAK,GAAL;QACC,OAAO,IAAI,qBAAqB,EAAE,CAAC,IAAI,CAAE,IAAI,CAAE,CAAC;IACjD,CAAC;IAES,+CAAe,GAAzB,UAA2B,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,EAAU;QACrE,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,IAAI,CAAC,MAAM,EAAG;YACjB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAG;gBAC5B,OAAO,IAAI,CAAC;aACZ;SACD;aAAM;YACN,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAC3B,IAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;YACjC,IAAI,MAAM,CAAC,MAAM,IAAI,CAAC,GAAG,WAAW,EAAG;gBACtC,IAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACxB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAG;oBAChB,IAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAE,GAAG,EAAE,CAAC,GAAG,CAAE,CAAC,GAAG,WAAW,GAAG,EAAE,CAAE,CAAE,CAAC;oBACxD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAG;wBAChB,OAAO,IAAI,CAAC;qBACZ;iBACD;aACD;SACD;IACF,CAAC;IAES,8CAAc,GAAxB,UACC,CAAS,EAAE,CAAS,EACpB,EAAU,EAAE,EAAU,EACtB,EAAU,EAAE,EAAU,EACtB,EAAU,EAAE,EAAU,EACtB,EAAU,EAAE,EAAU,EACtB,GAAW,EAAE,GAAW,EACxB,EAAU,EACV,MAAc;QAEd,IAAM,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,EAAE,CAAC;QACvC,IAAM,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,EAAE,CAAC;QACvC,IAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAE,CAAC;QACzC,IAAI,IAAI,GAAG,CAAC,EAAG;YACd,IAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,IAAM,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;YACpB,IAAM,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;YAEpB,IAAM,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,EAAE,CAAC;YACvC,IAAM,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,EAAE,CAAC;YACvC,IAAM,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;YACpB,IAAM,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;YAEpB,IAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;YAClC,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAE,GAAG,CAAE,EAAG;gBAC5B,IAAM,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC;gBACrB,IAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;gBAClB,IAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;gBAClB,IAAM,EAAE,GAAG,CAAE,CAAC,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAE,GAAG,IAAI,CAAC;gBAC3C,IAAM,EAAE,GAAG,CAAE,CAAC,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAE,GAAG,IAAI,CAAC;gBAC3C,IAAI,IAAI,CAAC,eAAe,CAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,GAAG,MAAM,CAAE,EAAG;oBACpD,OAAO,IAAI,CAAC;iBACZ;aACD;SACD;IACF,CAAC;IAED,2CAAW,GAAX,UAAa,CAAS,EAAE,CAAS,EAAE,EAAU,EAAE,EAAU;QACxD,IAAI,iBAAM,eAAe,YAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAE,EAAG;YAC3C,IAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;YACtB,IAAI,IAAI,CAAC,YAAY,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,CAAE,EAAG;gBAC5C,IAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAE,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,CAAE,CAAC;gBAC9C,IAAM,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;gBACnC,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAE3B,IAAM,EAAE,GAAG,CAAC,CAAC;gBACb,IAAM,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;gBACnB,IAAM,EAAE,GAAG,CAAC,CAAC;gBACb,IAAM,EAAE,GAAG,CAAC,EAAE,CAAC;gBACf,IAAM,EAAE,GAAG,CAAC,EAAE,CAAC;gBACf,IAAM,EAAE,GAAG,CAAC,EAAE,CAAC;gBACf,IAAM,EAAE,GAAG,CAAC,EAAE,CAAC;gBACf,IAAM,EAAE,GAAG,CAAC,EAAE,CAAC;gBACf,IAAM,GAAG,GAAG,EAAE,GAAG,MAAM,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,CAAC;gBACtC,IAAM,GAAG,GAAG,EAAE,GAAG,MAAM,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,CAAC;gBACtC,IAAM,GAAG,GAAG,EAAE,GAAG,MAAM,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,CAAC;gBACtC,IAAM,GAAG,GAAG,EAAE,GAAG,MAAM,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,CAAC;gBACtC,IAAM,GAAG,GAAG,CAAC,GAAG,CAAC;gBACjB,IAAM,GAAG,GAAG,CAAC,GAAG,CAAC;gBAEjB,IAAM,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;gBACjC,IAAM,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;gBACjC,IAAM,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC;gBACpB,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC3B,IAAI,CAAE,EAAE,IAAI,CAAE,EAAE,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,GAAG,CAAC,EAAG;oBACjD,aAAa;oBACb,IAAM,EAAE,GAAG,CAAE,GAAG,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,MAAM,CAAE,GAAG,CAAE,EAAE,CAAE,CAAC;oBACnD,IAAI,IAAI,CAAC,cAAc,CAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,CAAE,EAAG;wBACvF,OAAO,IAAI,CAAC;qBACZ;iBACD;qBAAM,IAAI,CAAE,EAAE,IAAI,CAAE,EAAE,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,WAAW,CAAC,EAAG;oBAChE,qBAAqB;oBACrB,IAAM,EAAE,GAAG,CAAE,EAAE,GAAG,MAAM,CAAE,GAAG,CAAE,CAAC,GAAG,EAAE,CAAE,CAAC;oBACxC,IAAM,EAAE,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,CAAE,CAAC,GAAG,EAAE,CAAE,CAAC;oBACpC,IAAI,IAAI,CAAC,cAAc,CAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,CAAE,EAAG;wBACvF,OAAO,IAAI,CAAC;qBACZ;iBACD;qBAAM,IAAI,CAAE,EAAE,IAAI,CAAE,EAAE,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,YAAY,CAAC,EAAG;oBACjE,sBAAsB;oBACtB,IAAM,EAAE,GAAG,CAAE,EAAE,GAAG,MAAM,CAAE,GAAG,CAAE,CAAC,GAAG,EAAE,CAAE,CAAC;oBACxC,IAAM,EAAE,GAAG,CAAE,EAAE,GAAG,EAAE,CAAE,GAAG,CAAE,CAAC,GAAG,EAAE,CAAE,CAAC;oBACpC,IAAI,IAAI,CAAC,cAAc,CAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,CAAE,EAAG;wBACvF,OAAO,IAAI,CAAC;qBACZ;iBACD;qBAAM;oBACN,SAAS;oBACT,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;oBACvB,IAAI,IAAI,CAAC,MAAM,EAAG;wBACjB,OAAO,IAAI,CAAC;qBACZ;yBAAM;wBACN,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;wBAC3B,IAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;wBACjC,IAAI,MAAM,CAAC,MAAM,IAAI,CAAC,GAAG,WAAW,EAAG;4BACtC,IAAM,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;4BACnB,IAAM,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAE,GAAG,EAAE,EAAE,GAAG,WAAW,CAAE,GAAG,EAAE,CAAC;4BACrE,IAAM,GAAG,GAAG,EAAE,GAAG,WAAW,CAAC;4BAC7B,IAAI,CAAE,IAAI,CAAC,YAAY,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAE,EAAG;gCAC9C,OAAO,IAAI,CAAC;6BACZ;yBACD;qBACD;iBACD;aACD;SACD;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IACF,4BAAC;AAAD,CAAC,AAxID,CAA2C,cAAc,GAwIxD","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { EShapeCorner } from \"../e-shape-corner\";\r\nimport { EShapeType } from \"../e-shape-type\";\r\nimport { EShapeTriangle } from \"./e-shape-triangle\";\r\n\r\nconst FMIN = 0.00001;\r\n\r\nexport class EShapeTriangleRounded extends EShapeTriangle {\r\n\tconstructor( type = EShapeType.TRIANGLE_ROUNDED ) {\r\n\t\tsuper( type );\r\n\t}\r\n\r\n\tclone(): EShapeTriangleRounded {\r\n\t\treturn new EShapeTriangleRounded().copy( this );\r\n\t}\r\n\r\n\tprotected containsCorner_( x: number, y: number, r: number, aw: number ) {\r\n\t\tconst fill = this.fill;\r\n\t\tif( fill.enable ) {\r\n\t\t\tif( x * x + y * y <= r * r ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst stroke = this.stroke;\r\n\t\t\tconst strokeWidth = stroke.width;\r\n\t\t\tif( stroke.enable && 0 < strokeWidth ) {\r\n\t\t\t\tconst d = x * x + y * y;\r\n\t\t\t\tif( d <= r * r ) {\r\n\t\t\t\t\tconst w = Math.max( 0.0, r * ( 1 - strokeWidth / aw ) );\r\n\t\t\t\t\tif( w * w <= d ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected containsCorner(\r\n\t\tx: number, y: number,\r\n\t\tx0: number, y0: number,\r\n\t\tx1: number, y1: number,\r\n\t\tx2: number, y2: number,\r\n\t\tx3: number, y3: number,\r\n\t\tr12: number, r13: number,\r\n\t\taw: number,\r\n\t\tradius: number\r\n\t) {\r\n\t\tconst xl = x1 + r12 * ( x2 - x1 ) - x0;\r\n\t\tconst yl = y1 + r12 * ( y2 - y1 ) - y0;\r\n\t\tconst n = Math.sqrt( xl * xl + yl * yl );\r\n\t\tif( FMIN < n ) {\r\n\t\t\tconst ni = 1 / n;\r\n\t\t\tconst nlx = xl * ni;\r\n\t\t\tconst nly = yl * ni;\r\n\r\n\t\t\tconst xr = x1 + r13 * ( x3 - x1 ) - x0;\r\n\t\t\tconst yr = y1 + r13 * ( y3 - y1 ) - y0;\r\n\t\t\tconst nrx = xr * ni;\r\n\t\t\tconst nry = yr * ni;\r\n\r\n\t\t\tconst det = nlx * nry - nrx * nly;\r\n\t\t\tif( FMIN < Math.abs( det ) ) {\r\n\t\t\t\tconst deti = 1 / det;\r\n\t\t\t\tconst xc = x - x0;\r\n\t\t\t\tconst yc = y - y0;\r\n\t\t\t\tconst dx = ( +nry * xc - nrx * yc ) * deti;\r\n\t\t\t\tconst dy = ( -nly * xc + nlx * yc ) * deti;\r\n\t\t\t\tif( this.containsCorner_( dx, dy, n, aw * radius ) ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ) {\r\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\r\n\t\t\tconst a = 2 * ay / ax;\r\n\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\r\n\t\t\t\tconst az = Math.sqrt( ax * ax + 4 * ay * ay );\r\n\t\t\t\tconst aw = 2 * ax * ay / (ax + az);\r\n\t\t\t\tconst radius = this.radius;\r\n\r\n\t\t\t\tconst x0 = 0;\r\n\t\t\t\tconst y0 = ay - aw;\r\n\t\t\t\tconst x1 = 0;\r\n\t\t\t\tconst y1 = -ay;\r\n\t\t\t\tconst x4 = +ax;\r\n\t\t\t\tconst y4 = +ay;\r\n\t\t\t\tconst x7 = -x4;\r\n\t\t\t\tconst y7 = +y4;\r\n\t\t\t\tconst x10 = x1 + radius * ( x0 - x1 );\r\n\t\t\t\tconst y10 = y1 + radius * ( y0 - y1 );\r\n\t\t\t\tconst x11 = x4 + radius * ( x0 - x4 );\r\n\t\t\t\tconst y11 = y4 + radius * ( y0 - y4 );\r\n\t\t\t\tconst y12 = +y11;\r\n\t\t\t\tconst x12 = -x11;\r\n\r\n\t\t\t\tconst c0 = -a * x + y10 - y <= 0;\r\n\t\t\t\tconst c1 = +a * x + y10 - y <= 0;\r\n\t\t\t\tconst c2 = y <= y11;\r\n\t\t\t\tconst corner = this.corner;\r\n\t\t\t\tif( ! c0 && ! c1 && (corner & EShapeCorner.TOP) ) {\r\n\t\t\t\t\t// Top corner\r\n\t\t\t\t\tconst rz = ( 0.5 * ( az - aw ) * radius ) / ( az );\r\n\t\t\t\t\tif( this.containsCorner( x, y, x10, y10, x1, y1, x7, y7, x4, y4, rz, rz, aw, radius ) ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if( ! c0 && ! c2 && (corner & EShapeCorner.BOTTOM_LEFT) ) {\r\n\t\t\t\t\t// Bottom-left corner\r\n\t\t\t\t\tconst ry = ( aw * radius ) / ( 2 * ay );\r\n\t\t\t\t\tconst rx = ( ry * az ) / ( 2 * ax );\r\n\t\t\t\t\tif( this.containsCorner( x, y, x12, y12, x7, y7, x4, y4, x1, y1, rx, ry, aw, radius ) ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if( ! c1 && ! c2 && (corner & EShapeCorner.BOTTOM_RIGHT) ) {\r\n\t\t\t\t\t// Bottom-right corner\r\n\t\t\t\t\tconst ry = ( aw * radius ) / ( 2 * ay );\r\n\t\t\t\t\tconst rx = ( ry * az ) / ( 2 * ax );\r\n\t\t\t\t\tif( this.containsCorner( x, y, x11, y11, x4, y4, x1, y1, x7, y7, ry, rx, aw, radius ) ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Others\r\n\t\t\t\t\tconst fill = this.fill;\r\n\t\t\t\t\tif( fill.enable ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst stroke = this.stroke;\r\n\t\t\t\t\t\tconst strokeWidth = stroke.width;\r\n\t\t\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\r\n\t\t\t\t\t\t\tconst cy = ay - aw;\r\n\t\t\t\t\t\t\tconst ay1 = cy + (-ay - cy) * Math.max( 0.0, aw - strokeWidth ) / aw;\r\n\t\t\t\t\t\t\tconst ay2 = ay - strokeWidth;\r\n\t\t\t\t\t\t\tif( ! this.containsAbs_( x, y, a, ay1, ay2 ) ) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n"]}