{"version":3,"file":"create-image-sdf.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/create-image-sdf.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,uBAAuB,EAAE,MAAM,uCAAuC,CAAC;AAChF,OAAO,EAAE,mBAAmB,EAAE,MAAM,2BAA2B,CAAC;AAChE,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AAErD,MAAM,CAAC,IAAM,cAAc,GAAG,UAAE,OAAe,EAAE,YAAqB;IACrE,IAAI,YAAY,EAAG;QAClB,OAAO,mBAAmB,CAAC,cAAc,CAAE,OAAO,CAAE;aACnD,IAAI,CAAC,UAAE,YAA8B;YACrC,IAAM,SAAS,GAAG,uBAAuB,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;YAC/D,SAAS,CAAC,aAAa,CAAE,YAAY,CAAE,CAAC;YACxC,SAAS,CAAC,MAAM,EAAE,CAAC;YAEnB,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAE,QAAQ,CAAE,CAAC;YAClD,SAAS,CAAC,IAAI,CAAE,MAAM,CAAE,CAAC;YAEzB,OAAO,cAAc,CAAE,MAAM,CAAC,SAAS,EAAE,EAAE,KAAK,CAAE,CAAC;QACpD,CAAC,CAAC,CAAC;KACH;SAAM;QACN,OAAO,mBAAmB,CAAC,cAAc,CAAE,OAAO,CAAE;aACnD,IAAI,CAAC,UAAE,YAA8B;YACrC,OAAO,IAAI,cAAc,CAAE,YAAY,CAAE,CAAC;QAC3C,CAAC,CAAC,CAAC;KACH;AACF,CAAC,CAAC","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DynamicSDFFontGenerator } from \"../../util/dynamic-sdf-font-generator\";\r\nimport { EShapeImageElements } from \"../e-shape-image-elements\";\r\nimport { EShapeImageSdf } from \"./e-shape-image-sdf\";\r\n\r\nexport const createImageSdf = ( dataUrl: string, convertToSdf: boolean ): Promise<EShapeImageSdf> => {\r\n\tif( convertToSdf ) {\r\n\t\treturn EShapeImageElements.toImageElement( dataUrl )\r\n\t\t.then(( imageElement: HTMLImageElement ): Promise<EShapeImageSdf> => {\r\n\t\t\tconst generator = DynamicSDFFontGenerator.getInstance().init();\r\n\t\t\tgenerator.updateTexture( imageElement );\r\n\t\t\tgenerator.render();\r\n\r\n\t\t\tconst canvas = document.createElement( \"canvas\" );\r\n\t\t\tgenerator.read( canvas );\r\n\r\n\t\t\treturn createImageSdf( canvas.toDataURL(), false );\r\n\t\t});\r\n\t} else {\r\n\t\treturn EShapeImageElements.toImageElement( dataUrl )\r\n\t\t.then(( imageElement: HTMLImageElement ): EShapeImageSdf => {\r\n\t\t\treturn new EShapeImageSdf( imageElement );\r\n\t\t});\r\n\t}\r\n};\r\n"]}