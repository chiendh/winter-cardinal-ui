{"version":3,"file":"e-shape-primitive.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/e-shape-primitive.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { IPoint, ObservablePoint } from \"pixi.js\";\r\nimport { EShape } from \"../e-shape\";\r\nimport { EShapeCorner } from \"../e-shape-corner\";\r\nimport { EShapeDefaults } from \"../e-shape-defaults\";\r\nimport { EShapeFill } from \"../e-shape-fill\";\r\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\r\nimport { EShapePoints } from \"../e-shape-points\";\r\nimport { EShapeStroke } from \"../e-shape-stroke\";\r\nimport { EShapeTag } from \"../e-shape-tag\";\r\nimport { EShapeText } from \"../e-shape-text\";\r\nimport { EShapeType } from \"../e-shape-type\";\r\nimport { EShapeBase } from \"./e-shape-base\";\r\nimport { EShapeFillImpl } from \"./e-shape-fill-impl\";\r\nimport { EShapeStrokeImpl } from \"./e-shape-stroke-impl\";\r\nimport { EShapeTagImpl } from \"./e-shape-tag-impl\";\r\nimport { EShapeTextImpl } from \"./e-shape-text-impl\";\r\n\r\nexport abstract class EShapePrimitive extends EShapeBase {\r\n\treadonly size: IPoint;\r\n\treadonly fill: EShapeFill;\r\n\treadonly stroke: EShapeStroke;\r\n\tprotected _radius: number;\r\n\tprotected _corner: EShapeCorner;\r\n\tpoints?: EShapePoints;\r\n\tprotected _image?: HTMLImageElement;\r\n\tgradient?: EShapeGradientLike;\r\n\treadonly text: EShapeText;\r\n\treadonly tag: EShapeTag;\r\n\tcursor: string;\r\n\r\n\tconstructor( type: EShapeType ) {\r\n\t\tsuper( type );\r\n\t\tthis.size = this.newSize();\r\n\t\tthis.fill = this.newFill();\r\n\t\tthis.stroke = this.newStroke();\r\n\t\tthis._radius = EShapeDefaults.RADIUS;\r\n\t\tthis._corner = EShapeCorner.ALL;\r\n\t\tthis.tag = new EShapeTagImpl();\r\n\t\tthis.text = this.newText();\r\n\t\tthis.cursor = EShapeDefaults.CURSOR;\r\n\t}\r\n\r\n\tprotected newSize(): IPoint {\r\n\t\treturn new ObservablePoint(\r\n\t\t\t() => { this.onSizeChange(); },\r\n\t\t\tundefined,\r\n\t\t\tEShapeDefaults.SIZE_X,\r\n\t\t\tEShapeDefaults.SIZE_Y\r\n\t\t);\r\n\t}\r\n\r\n\tprotected newFill(): EShapeFill {\r\n\t\treturn new EShapeFillImpl(\r\n\t\t\tthis, true,\r\n\t\t\tEShapeDefaults.FILL_COLOR,\r\n\t\t\tEShapeDefaults.FILL_ALPHA\r\n\t\t);\r\n\t}\r\n\r\n\tprotected newStroke(): EShapeStroke {\r\n\t\treturn new EShapeStrokeImpl(\r\n\t\t\tthis, true,\r\n\t\t\tEShapeDefaults.STROKE_COLOR,\r\n\t\t\tEShapeDefaults.STROKE_ALPHA,\r\n\t\t\tEShapeDefaults.STROKE_WIDTH,\r\n\t\t\tEShapeDefaults.STROKE_ALIGN,\r\n\t\t\tEShapeDefaults.STROKE_SIDE\r\n\t\t);\r\n\t}\r\n\r\n\tprotected newText(): EShapeText {\r\n\t\treturn new EShapeTextImpl(\r\n\t\t\tthis,\r\n\t\t\tEShapeDefaults.TEXT_VALUE,\r\n\t\t\tEShapeDefaults.STROKE_COLOR,\r\n\t\t\tEShapeDefaults.STROKE_ALPHA,\r\n\t\t\tEShapeDefaults.TEXT_FAMILY,\r\n\t\t\tEShapeDefaults.TEXT_SIZE\r\n\t\t);\r\n\t}\r\n\r\n\tabstract clone(): EShape;\r\n\r\n\tget corner(): number {\r\n\t\treturn this._corner;\r\n\t}\r\n\r\n\tset corner( corner: number ) {\r\n\t\tif( this._corner !== corner ) {\r\n\t\t\tthis._corner = corner;\r\n\t\t\tthis.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget radius(): number {\r\n\t\treturn this._radius;\r\n\t}\r\n\r\n\tset radius( radius: number ) {\r\n\t\tif( this._radius !== radius ) {\r\n\t\t\tthis._radius = radius;\r\n\t\t\tthis.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget image(): HTMLImageElement | undefined {\r\n\t\treturn this._image;\r\n\t}\r\n\r\n\tset image( image: HTMLImageElement | undefined ) {\r\n\t\tif( this._image !== image ) {\r\n\t\t\tif( image != null ) {\r\n\t\t\t\tthis._image = image;\r\n\t\t\t\tthis.imageSrc = image.src;\r\n\t\t\t} else {\r\n\t\t\t\tthis._image = undefined;\r\n\t\t\t\tthis.imageSrc = undefined;\r\n\t\t\t}\r\n\t\t\tconst parent = this.parent;\r\n\t\t\tif( parent != null ) {\r\n\t\t\t\tparent.toDirty();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}