{"version":3,"file":"e-shape-text-impl.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/e-shape-text-impl.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { Texture } from \"pixi.js\";\r\nimport { DDiagramSerializedText } from \"../../d-diagram-serialized\";\r\nimport { DeepPartial } from \"../../util/deep-partial\";\r\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\r\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\r\nimport { EShapeText, EShapeTextAtlas, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\r\nimport { EShapeTextAlign } from \"../e-shape-text-align\";\r\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\r\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\r\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\r\nimport { EShapeTextOffset } from \"../e-shape-text-offset\";\r\nimport { EShapeTextOutline } from \"../e-shape-text-outline\";\r\nimport { EShapeTextAlignImpl } from \"./e-shape-text-align-impl\";\r\nimport { EShapeTextImplParent } from \"./e-shape-text-impl-parent\";\r\nimport { EShapeTextOffsetImpl } from \"./e-shape-text-offset-impl\";\r\nimport { EShapeTextOutlineImpl } from \"./e-shape-text-outline-impl\";\r\n\r\nexport class EShapeTextImpl implements EShapeText {\r\n\tprotected _parent: EShapeTextImplParent;\r\n\tprotected _enable: boolean;\r\n\tprotected _value: string;\r\n\tprotected _family: string;\r\n\tprotected _color: number;\r\n\tprotected _alpha: number;\r\n\tprotected _size: number;\r\n\tprotected _weight: EShapeTextWeight;\r\n\treadonly align: EShapeTextAlign;\r\n\treadonly offset: EShapeTextOffset;\r\n\tprotected _style: EShapeTextStyle;\r\n\treadonly outline: EShapeTextOutline;\r\n\treadonly spacing: EShapeTextOffset;\r\n\tprotected _direction: EShapeTextDirection;\r\n\treadonly padding: EShapeTextOffset;\r\n\tprotected _clipping: boolean;\r\n\r\n\ttexture?: Texture;\t\t// Used for rendering and updated when rendered\r\n\tatlas?: EShapeTextAtlas;\t// Used for rendering and updated when rendered\r\n\tworld?: Float32Array;\t\t// Updated when rendered\r\n\r\n\tconstructor(\r\n\t\tparent: EShapeTextImplParent,\r\n\t\tvalue: string, color: number, alpha: number, family: string, size: number\r\n\t) {\r\n\t\tthis._parent = parent;\r\n\t\tthis._enable = true;\r\n\t\tthis._value = value;\r\n\t\tthis._color = color!;\r\n\t\tthis._alpha = alpha!;\r\n\t\tthis._family = family!;\r\n\t\tthis._size = size!;\r\n\t\tthis._weight = EShapeTextWeight.NORMAL;\r\n\t\tthis.align = new EShapeTextAlignImpl( parent, EShapeTextAlignHorizontal.CENTER, EShapeTextAlignVertical.MIDDLE );\r\n\t\tthis.offset = new EShapeTextOffsetImpl( parent, 0, 0 );\r\n\t\tthis._style = EShapeTextStyle.NORMAL;\r\n\t\tthis.spacing = new EShapeTextOffsetImpl( parent, 0, 0 );\r\n\t\tthis.outline = new EShapeTextOutlineImpl( parent, false, 0xffffff, 1.0, 0.5 );\r\n\t\tthis._direction = EShapeTextDirection.LEFT_TO_RIGHT;\r\n\t\tthis.padding = new EShapeTextOffsetImpl( parent, 10, 10 );\r\n\t\tthis._clipping = false;\r\n\t}\r\n\r\n\tget enable(): boolean {\r\n\t\treturn this._enable;\r\n\t}\r\n\r\n\tset enable( enable: boolean ) {\r\n\t\tif( this._enable !== enable ) {\r\n\t\t\tthis._enable = enable;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget value(): string {\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\tset value( value: string ) {\r\n\t\tif( this._value !== value ) {\r\n\t\t\tthis._value = value;\r\n\r\n\t\t\t// Compatibility check\r\n\t\t\tconst parent = this._parent;\r\n\t\t\tconst uploaded = parent.uploaded;\r\n\t\t\tif( uploaded == null || ! uploaded.isCompatible( parent ) ) {\r\n\t\t\t\tthis.atlas = undefined;\r\n\t\t\t\tparent.toDirty();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Character code check\r\n\t\t\tconst atlas = this.atlas;\r\n\t\t\tconst characters = atlas && atlas.characters;\r\n\t\t\tif( characters != null ) {\r\n\t\t\t\tfor( let i = 0, imax = value.length; i < imax; ++i ) {\r\n\t\t\t\t\tconst char = value[ i ];\r\n\t\t\t\t\tif( ! (char in characters) ) {\r\n\t\t\t\t\t\tthis.atlas = undefined;\r\n\t\t\t\t\t\tparent.toDirty();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.atlas = undefined;\r\n\t\t\t\tparent.toDirty();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Update uploaded\r\n\t\t\tparent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget family(): string {\r\n\t\treturn this._family;\r\n\t}\r\n\r\n\tset family( family: string ) {\r\n\t\tif( this._family !== family ) {\r\n\t\t\tthis._family = family;\r\n\t\t\tthis._parent.toDirty();\r\n\t\t}\r\n\t}\r\n\r\n\tget color(): number {\r\n\t\treturn this._color;\r\n\t}\r\n\r\n\tset color( color: number ) {\r\n\t\tif( this._color !== color ) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget alpha(): number {\r\n\t\treturn this._alpha;\r\n\t}\r\n\r\n\tset alpha( alpha: number ) {\r\n\t\tif( this._alpha !== alpha ) {\r\n\t\t\tthis._alpha = alpha;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget size(): number {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tset size( size: number ) {\r\n\t\tif( this._size !== size ) {\r\n\t\t\tthis._size = size;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget weight(): EShapeTextWeight {\r\n\t\treturn this._weight;\r\n\t}\r\n\r\n\tset weight( weight: EShapeTextWeight ) {\r\n\t\tif( this._weight !== weight ) {\r\n\t\t\tthis._weight = weight;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget style(): EShapeTextStyle {\r\n\t\treturn this._style;\r\n\t}\r\n\r\n\tset style( style: EShapeTextStyle ) {\r\n\t\tif( this._style !== style ) {\r\n\t\t\tthis._style = style;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget direction(): EShapeTextDirection {\r\n\t\treturn this._direction;\r\n\t}\r\n\r\n\tset direction( direction: EShapeTextDirection ) {\r\n\t\tif( this._direction !== direction ) {\r\n\t\t\tthis._direction = direction;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tget clipping(): boolean {\r\n\t\treturn this._clipping;\r\n\t}\r\n\r\n\tset clipping( clipping: boolean ) {\r\n\t\tif( this._clipping !== clipping ) {\r\n\t\t\tthis._clipping = clipping;\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\t}\r\n\r\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\r\n\t\tif( target ) {\r\n\t\t\tthis.set(\r\n\t\t\t\ttarget.value,\r\n\t\t\t\ttarget.color,\r\n\t\t\t\ttarget.alpha,\r\n\t\t\t\ttarget.family,\r\n\t\t\t\ttarget.size,\r\n\t\t\t\ttarget.weight,\r\n\t\t\t\ttarget.style,\r\n\t\t\t\ttarget.direction,\r\n\t\t\t\ttarget.clipping\r\n\t\t\t);\r\n\t\t\tthis.align.copy( target.align );\r\n\t\t\tthis.offset.copy( target.offset );\r\n\t\t\tthis.outline.copy( target.outline );\r\n\t\t\tthis.spacing.copy( target.spacing );\r\n\t\t\tthis.padding.copy( target.padding );\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tset(\r\n\t\tvalue?: string, color?: number, alpha?: number,\r\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\r\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\r\n\t\tclipping?: boolean\r\n\t): this {\r\n\t\tlet isChangedDirty = false;\r\n\t\tlet isChangedUploaded = false;\r\n\r\n\t\tif( value != null && this._value !== value ) {\r\n\t\t\tthis._value = value;\r\n\t\t\tisChangedDirty = true;\r\n\t\t}\r\n\r\n\t\tif( color != null && this._color !== color ) {\r\n\t\t\tthis._color = color;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( alpha != null && this._alpha !== alpha ) {\r\n\t\t\tthis._alpha = alpha;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( family != null && this._family !== family ) {\r\n\t\t\tthis._family = family;\r\n\t\t\tisChangedDirty = true;\r\n\t\t}\r\n\r\n\t\tif( size != null && this._size !== size ) {\r\n\t\t\tthis._size = size;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( weight != null && this._weight !== weight ) {\r\n\t\t\tthis._weight = weight;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( style != null && this._style !== style ) {\r\n\t\t\tthis._style = style;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( direction != null && this._direction !== direction ) {\r\n\t\t\tthis._direction = direction;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( clipping != null && this._clipping !== clipping ) {\r\n\t\t\tthis._clipping = clipping;\r\n\t\t\tisChangedUploaded = true;\r\n\t\t}\r\n\r\n\t\tif( isChangedDirty ) {\r\n\t\t\tthis._parent.toDirty();\r\n\t\t} else if( isChangedUploaded ) {\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\ttoObject(): EShapeTextLike {\r\n\t\treturn {\r\n\t\t\tvalue: this._value,\r\n\t\t\tcolor: this._color,\r\n\t\t\talpha: this._alpha,\r\n\t\t\tfamily: this._family,\r\n\t\t\tsize: this._size,\r\n\t\t\tweight: this._weight,\r\n\t\t\talign: this.align.toObject(),\r\n\t\t\toffset: this.offset.toObject(),\r\n\t\t\tstyle: this._style,\r\n\t\t\toutline: this.outline.toObject(),\r\n\t\t\tdirection: this._direction,\r\n\t\t\tspacing: this.spacing.toObject(),\r\n\t\t\tpadding: this.padding.toObject(),\r\n\t\t\tclipping: this._clipping\r\n\t\t};\r\n\t}\r\n\r\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\r\n\t\tconst alignSerialized = this.align.serialize( manager );\r\n\t\tconst offsetSerialized = this.offset.serialize( manager );\r\n\t\tconst outlineSerialized = this.outline.serialize( manager );\r\n\t\tconst spacingSerialized = this.spacing.serialize( manager );\r\n\t\tconst paddingSerialized = this.padding.serialize( manager );\r\n\t\tconst serialized = `[${manager.add( this._value )},${this._color},${this._alpha},` +\r\n\t\t\t`${manager.add( this._family )},${this._size},${this._weight},${alignSerialized},` +\r\n\t\t\t`${offsetSerialized},${this._style},${outlineSerialized},${spacingSerialized},` +\r\n\t\t\t`${this._direction},${paddingSerialized},${this._clipping ? 1 : 0 }]`;\r\n\t\treturn manager.add( serialized );\r\n\t}\r\n\r\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\r\n\t\tconst resources = manager.resources;\r\n\t\tif( 0 <= target && target < resources.length ) {\r\n\t\t\tlet parsed = manager.texts.get( target );\r\n\t\t\tif( parsed == null ) {\r\n\t\t\t\tparsed = JSON.parse( resources[ target ] ) as DDiagramSerializedText;\r\n\t\t\t\tmanager.texts.set( target, parsed );\r\n\t\t\t}\r\n\t\t\tthis.set(\r\n\t\t\t\tresources[ parsed[ 0 ] ] || \"\",\r\n\t\t\t\tparsed[ 1 ],\r\n\t\t\t\tparsed[ 2 ],\r\n\t\t\t\tresources[ parsed[ 3 ] ] || \"auto\",\r\n\t\t\t\tparsed[ 4 ],\r\n\t\t\t\tparsed[ 5 ],\r\n\t\t\t\tparsed[ 8 ],\r\n\t\t\t\tparsed[ 11 ],\r\n\t\t\t\t( parsed[ 13 ] !== 0 )\r\n\t\t\t);\r\n\t\t\tthis.align.deserialize( parsed[ 6 ], manager );\r\n\t\t\tthis.offset.deserialize( parsed[ 7 ], manager );\r\n\t\t\tthis.outline.deserialize( parsed[ 9 ], manager );\r\n\t\t\tthis.spacing.deserialize( parsed[ 10 ], manager );\r\n\t\t\tthis.padding.deserialize( parsed[ 12 ], manager );\r\n\t\t}\r\n\t}\r\n}\r\n"]}