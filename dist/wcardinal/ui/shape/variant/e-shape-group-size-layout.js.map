{"version":3,"file":"e-shape-group-size-layout.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/e-shape-group-size-layout.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAGxC,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AAEzD;IAQC,+BAAa,KAAa,EAAE,EAAU,EAAE,EAAU;QACjD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,kBAAkB;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,KAAK,CAAE,EAAE,EAAE,EAAE,CAAE,CAAC;QAEhC,kBAAkB;QAClB,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,CAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAE,CAAC;QAE7C,YAAY;QACZ,IAAI,CAAC,SAAS,GAAG,IAAI,MAAM,EAAE,CAAC;QAC9B,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAE,IAAI,CAAC,SAAS,CAAE,CAAC;IACzD,CAAC;IAED,4CAAY,GAAZ,UAAc,KAAa;QAC1B,OAAO,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC;IAC7B,CAAC;IAED,qCAAK,GAAL,UAAO,KAAa,EAAE,KAAa,EAAE,KAAa;QACjD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAE,KAAK,EAAE,KAAK,CAAE,CAAC;QAE9B,kBAAkB;QAClB,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;QACxB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAE,IAAI,CAAE,CAAC;QAEhC,YAAY;QACZ,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAE,IAAI,CAAC,SAAS,CAAE,CAAC;IACzD,CAAC;IAED,sCAAM,GAAN,UACC,KAAa,EAAE,KAAa,EAAE,KAAa,EAC3C,MAAc,EAAE,MAAc;QAE9B,IAAM,EAAE,GAAG,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/B,IAAM,EAAE,GAAG,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/B,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QACjC,IAAM,SAAS,GAAG,qBAAqB,CAAC,cAAc,CAAC;QACvD,SAAS,CAAC,QAAQ,EAAE;aAClB,MAAM,CAAE,IAAI,CAAC,SAAS,CAAE;aACxB,SAAS,CAAE,CAAC,MAAM,EAAE,CAAC,MAAM,CAAE;aAC7B,KAAK,CAAE,EAAE,EAAE,EAAE,CAAE;aACf,SAAS,CAAE,CAAC,MAAM,EAAE,CAAC,MAAM,CAAE,CAAC;QAChC,KAAK,CAAC,yBAAyB,EAAE,CAAC;QAClC,gBAAgB,CAAC,UAAU,CAAE,KAAK,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAE,CAAC;QAC1E,KAAK,CAAC,sBAAsB,CAAE,KAAK,CAAE,CAAC;IACvC,CAAC;IAvDgB,oCAAc,GAAW,IAAI,MAAM,EAAE,CAAC;IAwDxD,4BAAC;CAAA,AAzDD,IAyDC;SAzDY,qBAAqB","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { Matrix, Point } from \"pixi.js\";\r\nimport { EShape } from \"../e-shape\";\r\nimport { EShapeLayout } from \"../e-shape-layout\";\r\nimport { EShapeTransforms } from \"../e-shape-transforms\";\r\n\r\nexport class EShapeGroupSizeLayout implements EShapeLayout {\r\n\tprotected static WORK_TRANSFORM: Matrix = new Matrix();\r\n\r\n\tprotected shape: EShape;\r\n\tprotected base: Point;\r\n\tprotected shapeBase: Point;\r\n\tprotected transform: Matrix;\r\n\r\n\tconstructor( shape: EShape, bx: number, by: number ) {\r\n\t\tthis.shape = shape;\r\n\r\n\t\t// Base group size\r\n\t\tthis.base = new Point( bx, by );\r\n\r\n\t\t// Base shape size\r\n\t\tconst size = shape.size;\r\n\t\tthis.shapeBase = new Point( size.x, size.y );\r\n\r\n\t\t// Transform\r\n\t\tthis.transform = new Matrix();\r\n\t\tshape.updateTransform();\r\n\t\tshape.transform.localTransform.copyTo( this.transform );\r\n\t}\r\n\r\n\tisCompatible( shape: EShape ): boolean {\r\n\t\treturn this.shape === shape;\r\n\t}\r\n\r\n\treset( shape: EShape, baseX: number, baseY: number ): void {\r\n\t\tthis.base.set( baseX, baseY );\r\n\r\n\t\t// Base shape size\r\n\t\tconst size = shape.size;\r\n\t\tthis.shapeBase.copyFrom( size );\r\n\r\n\t\t// Transform\r\n\t\tshape.updateTransform();\r\n\t\tshape.transform.localTransform.copyTo( this.transform );\r\n\t}\r\n\r\n\tupdate(\r\n\t\tshape: EShape, baseX: number, baseY: number,\r\n\t\tpivotX: number, pivotY: number\r\n\t) {\r\n\t\tconst sx = baseX / this.base.x;\r\n\t\tconst sy = baseY / this.base.y;\r\n\t\tconst childBase = this.shapeBase;\r\n\t\tconst transform = EShapeGroupSizeLayout.WORK_TRANSFORM;\r\n\t\ttransform.identity()\r\n\t\t\t.append( this.transform )\r\n\t\t\t.translate( -pivotX, -pivotY )\r\n\t\t\t.scale( sx, sy )\r\n\t\t\t.translate( +pivotX, +pivotY );\r\n\t\tshape.disallowOnTransformChange();\r\n\t\tEShapeTransforms.applyLocal( shape, transform, childBase.x, childBase.y );\r\n\t\tshape.allowOnTransformChange( false );\r\n\t}\r\n}\r\n"]}