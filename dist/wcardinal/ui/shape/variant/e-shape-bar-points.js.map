{"version":3,"file":"e-shape-bar-points.js","sourceRoot":"","sources":["../../../../../src/main/typescript/wcardinal/ui/shape/variant/e-shape-bar-points.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAU,KAAK,EAAE,MAAM,SAAS,CAAC;AAMxC,OAAO,EAAE,iBAAiB,EAAE,MAAM,wBAAwB,CAAC;AAK3D;IAcC,yBAAa,MAAc,EAAE,QAA2B,EAAE,IAAY,EAAE,KAAwB;QAC/F,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,IAAI,CAAC,OAAO,GAAG,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAE1B,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,mBAAmB,GAAG,GAAG,CAAC;QAC/B,IAAI,CAAC,mBAAmB,GAAG,GAAG,CAAC;QAC/B,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;IAC7B,CAAC;IAES,yCAAe,GAAzB,UAA2B,IAAY,EAAE,QAA2B,EAAE,KAAa,EAAE,KAAa;QACjG,IAAI,CAAC,IAAI,IAAI,EAAG;YACf,OAAO,IAAI,CAAC;SACZ;aAAM;YACN,QAAQ,QAAQ,EAAG;gBACnB,KAAK,iBAAiB,CAAC,GAAG,CAAC;gBAC3B,KAAK,iBAAiB,CAAC,MAAM;oBAC5B,OAAO,IAAI,CAAC,GAAG,CAAE,KAAK,CAAE,CAAC;gBAC1B,KAAK,iBAAiB,CAAC,KAAK,CAAC;gBAC7B,KAAK,iBAAiB,CAAC,IAAI;oBAC1B,OAAO,IAAI,CAAC,GAAG,CAAE,KAAK,CAAE,CAAC;aACzB;YACD,OAAO,CAAC,CAAC;SACT;IACF,CAAC;IAES,gCAAM,GAAhB;QACC,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;QACrC,IAAM,WAAW,GAAG,UAAU,CAAC,CAAC,CAAC;QACjC,IAAM,WAAW,GAAG,UAAU,CAAC,CAAC,CAAC;QACjC,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACxB,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,IAAI,IAAI,CAAC,mBAAmB,KAAK,WAAW;YACzE,IAAI,CAAC,mBAAmB,KAAK,WAAW,IAAI,IAAI,CAAC,gBAAgB,KAAK,QAAQ,EAAG;YACjF,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;YACd,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,mBAAmB,GAAG,WAAW,CAAC;YACvC,IAAI,CAAC,mBAAmB,GAAG,WAAW,CAAC;YACvC,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC;YACjC,IAAM,IAAI,GAAG,WAAW,GAAG,GAAG,CAAC;YAC/B,IAAM,IAAI,GAAG,WAAW,GAAG,GAAG,CAAC;YAC/B,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,WAAW,CAAE,CAAC;YACtF,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;YAC5B,QAAQ,QAAQ,EAAG;gBACnB,KAAK,iBAAiB,CAAC,GAAG;oBACzB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,IAAI,CAAC;oBACpB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC;oBACnC,MAAM;gBACP,KAAK,iBAAiB,CAAC,KAAK;oBAC3B,MAAM,CAAE,CAAC,CAAE,GAAG,IAAI,CAAC;oBACnB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM,CAAE,CAAC,CAAE,GAAG,IAAI,GAAG,YAAY,CAAC;oBAClC,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM;gBACP,KAAK,iBAAiB,CAAC,MAAM;oBAC5B,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM,CAAE,CAAC,CAAE,GAAG,IAAI,CAAC;oBACnB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM,CAAE,CAAC,CAAE,GAAG,IAAI,GAAG,YAAY,CAAC;oBAClC,MAAM;gBACP,KAAK,iBAAiB,CAAC,IAAI;oBAC1B,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,IAAI,CAAC;oBACpB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC;oBACnC,MAAM,CAAE,CAAC,CAAE,GAAG,CAAC,CAAC;oBAChB,MAAM;aACN;SACD;IACF,CAAC;IAED,sBAAI,mCAAM;aAAV;YACC,OAAO,CAAC,CAAC;QACV,CAAC;;;OAAA;IAED,sBAAI,+BAAE;aAAN;YACC,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,OAAO,IAAI,CAAC,GAAG,CAAC;QACjB,CAAC;;;OAAA;IAED,sBAAI,mCAAM;aAAV;YACC,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,OAAO,IAAI,CAAC,OAAO,CAAC;QACrB,CAAC;aAED,UAAY,MAAgB;YAC3B,4BAA4B;QAC7B,CAAC;;;OAJA;IAMD,sBAAI,qCAAQ;aAAZ;YACC,OAAO,IAAI,CAAC,SAAS,CAAC;QACvB,CAAC;aAED,UAAc,QAAkB;YAC/B,4BAA4B;QAC7B,CAAC;;;OAJA;IAMD,sBAAI,iCAAI;aAAR;YACC,OAAO,IAAI,CAAC,KAAK,CAAC;QACnB,CAAC;aAED,UAAU,IAAY;YACrB,IAAI,CAAC,MAAM,CAAE,SAAS,EAAE,IAAI,EAAE,SAAS,CAAE,CAAC;QAC3C,CAAC;;;OAJA;IAMD,sBAAI,qCAAQ;aAAZ;YACC,OAAO,IAAI,CAAC,SAAS,CAAC;QACvB,CAAC;aAED,UAAc,QAA2B;YACxC,IAAI,CAAC,MAAM,CAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,CAAE,CAAC;QAC/C,CAAC;;;OAJA;IAMD,sBAAI,kCAAK;aAAT;YACC,OAAO,IAAI,CAAC,MAAM,CAAC;QACpB,CAAC;aAED,UAAW,KAAwB;YAClC,IAAI,CAAC,MAAM,CAAE,SAAS,EAAE,SAAS,EAAE,KAAK,CAAE,CAAC;QAC5C,CAAC;;;OAJA;IAMD,8BAAI,GAAJ,UAAM,MAAoB;QACzB,IAAI,MAAM,YAAY,eAAe,EAAG;YACvC,OAAO,IAAI,CAAC,MAAM,CAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAE,CAAC;SACjE;aAAM;YACN,OAAO,IAAI,CAAC,MAAM,CAAE,SAAS,EAAE,SAAS,EAAE,MAAM,CAAC,KAAK,CAAE,CAAC;SACzD;IACF,CAAC;IAED,6BAAG,GAAH,UAAK,SAAoB,EAAE,WAAsB,EAAE,QAA4B;QAC9E,IAAI,WAA0C,CAAC;QAC/C,IAAI,OAA2B,CAAC;QAChC,IAAI,SAAS,IAAI,IAAI,EAAG;YACvB,IAAM,EAAE,GAAG,SAAS,CAAE,CAAC,CAAE,CAAC;YAC1B,IAAI,EAAE,KAAK,CAAC,EAAG;gBACd,IAAM,EAAE,GAAG,SAAS,CAAE,CAAC,CAAE,CAAC;gBAC1B,WAAW,GAAG,CAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,iBAAiB,CAAC,MAAM,CAAE,CAAC;gBAC7E,OAAO,GAAG,IAAI,CAAC,GAAG,CAAE,SAAS,CAAE,CAAC,CAAE,GAAG,EAAE,CAAE,CAAC;aAC1C;iBAAM;gBACN,WAAW,GAAG,CAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,iBAAiB,CAAC,KAAK,CAAE,CAAC;gBAC7E,OAAO,GAAG,IAAI,CAAC,GAAG,CAAE,SAAS,CAAE,CAAC,CAAE,GAAG,EAAE,CAAE,CAAC;aAC1C;SACD;QACD,OAAO,IAAI,CAAC,MAAM,CAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,CAAE,CAAC;IACtD,CAAC;IAES,gCAAM,GAAhB,UAAkB,QAA4B,EAAE,IAAa,EAAE,KAAyB;QACvF,IAAI,SAAS,GAAG,KAAK,CAAC;QAEtB,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,KAAK,EAAG;YAC5C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,SAAS,GAAG,IAAI,CAAC;SACjB;QAED,IAAI,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,SAAS,KAAK,QAAQ,EAAG;YACrD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;YAC1B,SAAS,GAAG,IAAI,CAAC;SACjB;QAED,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAG;YACzC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,SAAS,GAAG,IAAI,CAAC;SACjB;QAED,IAAI,SAAS,EAAG;YACf,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;SAC9B;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAED,+BAAK,GAAL,UAAO,MAAc;QACpB,OAAO,IAAI,eAAe,CAAE,MAAM,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAE,CAAC;IAC/E,CAAC;IAED,kCAAQ,GAAR,UAAU,SAAiB;QAC1B,IAAM,MAAM,GAAY,EAAE,CAAC;QAC3B,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,EAAG;YACxD,IAAM,KAAK,GAAG,IAAI,KAAK,CAAE,MAAM,CAAE,CAAC,GAAG,CAAC,CAAE,EAAE,MAAM,CAAE,CAAC,GAAG,CAAC,CAAE,CAAE,CAAC;YAC5D,MAAM,CAAC,IAAI,CAAE,SAAS,CAAC,KAAK,CAAE,KAAK,EAAE,KAAK,CAAE,CAAE,CAAC;SAC/C;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAED,mCAAS,GAAT,UAAW,OAA2C;QACrD,OAAO,OAAO,CAAC,GAAG,CAAE,MAAI,IAAI,CAAC,SAAS,SAAI,IAAI,CAAC,KAAK,SAAI,IAAI,CAAC,MAAM,MAAG,CAAE,CAAC;IAC1E,CAAC;IAED,qCAAW,GAAX,UAAa,UAAkB,EAAE,OAA6C;QAC7E,IAAI,CAAC,IAAI,UAAU,IAAI,UAAU,GAAG,OAAO,CAAC,SAAS,CAAC,MAAM,EAAG;YAC9D,IAAM,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAE,UAAU,CAAE,CAAC;YACjD,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAE,QAAQ,CAAgC,CAAC;YACpE,IAAI,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC,CAAE,EAAE,MAAM,CAAE,CAAC,CAAE,EAAE,MAAM,CAAE,CAAC,CAAE,CAAE,CAAC;SACrD;IACF,CAAC;IAED,yCAAe,GAAf,UACC,CAAS,EAAE,CAAS,EACpB,EAAU,EAAE,EAAU,EACtB,SAAiB,EACjB,KAA2C,EAC3C,MAA6C,EAC7C,MAAc;QAEd,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,CAAC,IAAI,MAAM,EAAG;YACjB,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;YAC5B,IAAM,GAAG,GAAG,MAAM,CAAE,CAAC,CAAE,CAAC;YACxB,IAAM,GAAG,GAAG,MAAM,CAAE,CAAC,CAAE,CAAC;YACxB,IAAM,GAAG,GAAG,MAAM,CAAE,CAAC,CAAE,CAAC;YACxB,IAAM,GAAG,GAAG,MAAM,CAAE,CAAC,CAAE,CAAC;YACxB,IAAI,MAAM,CAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,SAAS,EAAE,MAAM,CAAE,EAAG;gBAC9D,OAAO,IAAI,CAAC;aACZ;SACD;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IACF,sBAAC;AAAD,CAAC,AA9OD,IA8OC","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { Matrix, Point } from \"pixi.js\";\r\nimport { EShape } from \"../e-shape\";\r\nimport { EShapePoints } from \"../e-shape-points\";\r\nimport { EShapePointsStyle } from \"../e-shape-points-style\";\r\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\r\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\r\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\r\nimport {\r\n\tEShapeLineBasePoints, EShapeLineBasePointsHitTester, EShapeLineBasePointsTestRange\r\n} from \"./e-shape-line-base-points\";\r\n\r\nexport class EShapeBarPoints implements EShapeLineBasePoints {\r\n\tprotected _parent: EShape;\r\n\tprotected _id: number;\r\n\tprotected _style: EShapePointsStyle;\r\n\tprotected _values: [ number, number, number, number ];\r\n\tprotected _segments: number[];\r\n\tprotected _size: number;\r\n\tprotected _position: EShapeBarPosition;\r\n\r\n\tprotected _updatedSize: number;\r\n\tprotected _updatedParentSizeX: number;\r\n\tprotected _updatedParentSizeY: number;\r\n\tprotected _updatedPosition: EShapeBarPosition;\r\n\r\n\tconstructor( parent: EShape, position: EShapeBarPosition, size: number, style: EShapePointsStyle ) {\r\n\t\tthis._parent = parent;\r\n\t\tthis._id = 0;\r\n\t\tthis._values = [ 0, 0, 0, 0 ];\r\n\t\tthis._segments = [];\r\n\t\tthis._style = style;\r\n\t\tthis._size = size;\r\n\t\tthis._position = position;\r\n\r\n\t\tthis._updatedSize = NaN;\r\n\t\tthis._updatedParentSizeX = NaN;\r\n\t\tthis._updatedParentSizeY = NaN;\r\n\t\tthis._updatedPosition = NaN;\r\n\t}\r\n\r\n\tprotected getComputedSize( size: number, position: EShapeBarPosition, sizeX: number, sizeY: number ): number {\r\n\t\tif( 0 <= size ) {\r\n\t\t\treturn size;\r\n\t\t} else {\r\n\t\t\tswitch( position ) {\r\n\t\t\tcase EShapeBarPosition.TOP:\r\n\t\t\tcase EShapeBarPosition.BOTTOM:\r\n\t\t\t\treturn Math.abs( sizeY );\r\n\t\t\tcase EShapeBarPosition.RIGHT:\r\n\t\t\tcase EShapeBarPosition.LEFT:\r\n\t\t\t\treturn Math.abs( sizeX );\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected update(): void {\r\n\t\tconst parentSize = this._parent.size;\r\n\t\tconst parentSizeX = parentSize.x;\r\n\t\tconst parentSizeY = parentSize.y;\r\n\t\tconst position = this._position;\r\n\t\tconst size = this._size;\r\n\t\tif( this._updatedSize !== size || this._updatedParentSizeX !== parentSizeX ||\r\n\t\t\tthis._updatedParentSizeY !== parentSizeY || this._updatedPosition !== position ) {\r\n\t\t\tthis._id += 1;\r\n\t\t\tthis._updatedSize = size;\r\n\t\t\tthis._updatedParentSizeX = parentSizeX;\r\n\t\t\tthis._updatedParentSizeY = parentSizeY;\r\n\t\t\tthis._updatedPosition = position;\r\n\t\t\tconst psxh = parentSizeX * 0.5;\r\n\t\t\tconst psyh = parentSizeY * 0.5;\r\n\t\t\tconst computedSize = this.getComputedSize( size, position, parentSizeX, parentSizeY );\r\n\t\t\tconst values = this._values;\r\n\t\t\tswitch( position ) {\r\n\t\t\tcase EShapeBarPosition.TOP:\r\n\t\t\t\tvalues[ 0 ] = 0;\r\n\t\t\t\tvalues[ 1 ] = -psyh;\r\n\t\t\t\tvalues[ 2 ] = 0;\r\n\t\t\t\tvalues[ 3 ] = -psyh + computedSize;\r\n\t\t\t\tbreak;\r\n\t\t\tcase EShapeBarPosition.RIGHT:\r\n\t\t\t\tvalues[ 0 ] = psxh;\r\n\t\t\t\tvalues[ 1 ] = 0;\r\n\t\t\t\tvalues[ 2 ] = psxh - computedSize;\r\n\t\t\t\tvalues[ 3 ] = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase EShapeBarPosition.BOTTOM:\r\n\t\t\t\tvalues[ 0 ] = 0;\r\n\t\t\t\tvalues[ 1 ] = psyh;\r\n\t\t\t\tvalues[ 2 ] = 0;\r\n\t\t\t\tvalues[ 3 ] = psyh - computedSize;\r\n\t\t\t\tbreak;\r\n\t\t\tcase EShapeBarPosition.LEFT:\r\n\t\t\t\tvalues[ 0 ] = -psxh;\r\n\t\t\t\tvalues[ 1 ] = 0;\r\n\t\t\t\tvalues[ 2 ] = -psxh + computedSize;\r\n\t\t\t\tvalues[ 3 ] = 0;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tget length(): number {\r\n\t\treturn 2;\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\tthis.update();\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\tget values(): number[] {\r\n\t\tthis.update();\r\n\t\treturn this._values;\r\n\t}\r\n\r\n\tset values( values: number[] ) {\r\n\t\t// SUPPOSED NOT TO BE CALLED\r\n\t}\r\n\r\n\tget segments(): number[] {\r\n\t\treturn this._segments;\r\n\t}\r\n\r\n\tset segments( segments: number[] ) {\r\n\t\t// SUPPOSED NOT TO BE CALLED\r\n\t}\r\n\r\n\tget size(): number {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tset size( size: number ) {\r\n\t\tthis.moveTo( undefined, size, undefined );\r\n\t}\r\n\r\n\tget position(): EShapeBarPosition {\r\n\t\treturn this._position;\r\n\t}\r\n\r\n\tset position( position: EShapeBarPosition ) {\r\n\t\tthis.moveTo( position, undefined, undefined );\r\n\t}\r\n\r\n\tget style(): EShapePointsStyle {\r\n\t\treturn this._style;\r\n\t}\r\n\r\n\tset style( style: EShapePointsStyle ) {\r\n\t\tthis.moveTo( undefined, undefined, style );\r\n\t}\r\n\r\n\tcopy( source: EShapePoints ): this {\r\n\t\tif( source instanceof EShapeBarPoints ) {\r\n\t\t\treturn this.moveTo( source.position, source.size, source.style );\r\n\t\t} else {\r\n\t\t\treturn this.moveTo( undefined, undefined, source.style );\r\n\t\t}\r\n\t}\r\n\r\n\tset( newValues?: number[], newSegments?: number[], newStyle?: EShapePointsStyle ): this {\r\n\t\tlet newPosition: EShapeBarPosition | undefined;\r\n\t\tlet newSize: number | undefined;\r\n\t\tif( newValues != null ) {\r\n\t\t\tconst x0 = newValues[ 0 ];\r\n\t\t\tif( x0 === 0 ) {\r\n\t\t\t\tconst y0 = newValues[ 1 ];\r\n\t\t\t\tnewPosition = ( y0 <= 0 ? EShapeBarPosition.TOP : EShapeBarPosition.BOTTOM );\r\n\t\t\t\tnewSize = Math.abs( newValues[ 3 ] - y0 );\r\n\t\t\t} else {\r\n\t\t\t\tnewPosition = ( x0 <= 0 ? EShapeBarPosition.LEFT : EShapeBarPosition.RIGHT );\r\n\t\t\t\tnewSize = Math.abs( newValues[ 2 ] - x0 );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.moveTo( newPosition, newSize, newStyle );\r\n\t}\r\n\r\n\tprotected moveTo( position?: EShapeBarPosition, size?: number, style?: EShapePointsStyle ): this {\r\n\t\tlet isChanged = false;\r\n\r\n\t\tif( style != null && this._style !== style ) {\r\n\t\t\tthis._style = style;\r\n\t\t\tisChanged = true;\r\n\t\t}\r\n\r\n\t\tif( position != null && this._position !== position ) {\r\n\t\t\tthis._position = position;\r\n\t\t\tisChanged = true;\r\n\t\t}\r\n\r\n\t\tif( size != null && this._size !== size ) {\r\n\t\t\tthis._size = size;\r\n\t\t\tisChanged = true;\r\n\t\t}\r\n\r\n\t\tif( isChanged ) {\r\n\t\t\tthis._parent.updateUploaded();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tclone( parent: EShape ): EShapeBarPoints {\r\n\t\treturn new EShapeBarPoints( parent, this._position, this._size, this._style );\r\n\t}\r\n\r\n\ttoPoints( transform: Matrix ): Point[] {\r\n\t\tconst result: Point[] = [];\r\n\t\tconst values = this.values;\r\n\t\tfor( let i = 0, imax = values.length; i < imax; i += 2 ) {\r\n\t\t\tconst point = new Point( values[ i + 0 ], values[ i + 1 ] );\r\n\t\t\tresult.push( transform.apply( point, point ) );\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\r\n\t\treturn manager.add( `[${this._position},${this._size},${this._style}]` );\r\n\t}\r\n\r\n\tdeserialize( resourceId: number, manager: EShapeResourceManagerDeserialization ): void {\r\n\t\tif( 0 <= resourceId && resourceId < manager.resources.length ) {\r\n\t\t\tconst resource = manager.resources[ resourceId ];\r\n\t\t\tconst parsed = JSON.parse( resource ) as [ number, number, number ];\r\n\t\t\tthis.moveTo( parsed[ 0 ], parsed[ 1 ], parsed[ 2 ] );\r\n\t\t}\r\n\t}\r\n\r\n\tcalcHitPointAbs<RESULT>(\r\n\t\tx: number, y: number,\r\n\t\tax: number, ay: number,\r\n\t\tthreshold: number,\r\n\t\trange: EShapeLineBasePointsTestRange | null,\r\n\t\ttester: EShapeLineBasePointsHitTester<RESULT>,\r\n\t\tresult: RESULT\r\n\t): boolean {\r\n\t\tconst length = this.length;\r\n\t\tif( 2 <= length ) {\r\n\t\t\tconst values = this._values;\r\n\t\t\tconst v0x = values[ 0 ];\r\n\t\t\tconst v0y = values[ 1 ];\r\n\t\t\tconst v1x = values[ 2 ];\r\n\t\t\tconst v1y = values[ 3 ];\r\n\t\t\tif( tester( x, y, v0x, v0y, v1x, v1y, 0, threshold, result ) ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n"]}