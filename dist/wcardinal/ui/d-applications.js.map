{"version":3,"file":"d-applications.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-applications.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DApplicationLayerLike } from \"./d-application-layer-like\";\r\nimport { DApplicationLayerStageLike } from \"./d-application-layer-stage-like\";\r\nimport { DApplicationLike, DApplicationTarget } from \"./d-application-like\";\r\n\r\nexport class DApplications {\r\n\tprotected static INSTANCES: DApplicationLike[] = [];\r\n\r\n\tstatic add( instance: DApplicationLike ): void {\r\n\t\tconst instances = DApplications.INSTANCES;\r\n\t\tinstances.push( instance );\r\n\t}\r\n\r\n\tstatic first(): DApplicationLike {\r\n\t\tconst instances = DApplications.INSTANCES;\r\n\t\tif( 0 < instances.length ) {\r\n\t\t\treturn instances[ 0 ];\r\n\t\t}\r\n\t\tthrow new Error( \"No application found.\" );\r\n\t}\r\n\r\n\tstatic last(): DApplicationLike {\r\n\t\tconst instances = DApplications.INSTANCES;\r\n\t\tif( 0 < instances.length ) {\r\n\t\t\treturn instances[ instances.length - 1 ];\r\n\t\t}\r\n\t\tthrow new Error( \"No application found.\" );\r\n\t}\r\n\r\n\tstatic get( index: number ): DApplicationLike | null {\r\n\t\tconst instances = DApplications.INSTANCES;\r\n\t\tif( 0 <= index && index < instances.length ) {\r\n\t\t\treturn instances[ index ];\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic indexOf( instance: DApplicationLike ): number {\r\n\t\treturn DApplications.INSTANCES.indexOf( instance );\r\n\t}\r\n\r\n\tstatic size(): number {\r\n\t\treturn DApplications.INSTANCES.length;\r\n\t}\r\n\r\n\tprotected static toStage( target: DApplicationTarget ): DApplicationLayerStageLike | null {\r\n\t\tlet stage: any = target;\r\n\t\twhile( stage.parent ) {\r\n\t\t\tstage = stage.parent;\r\n\t\t}\r\n\t\tif( (\"application\" in stage) && (\"layer\" in stage) ) {\r\n\t\t\treturn stage as DApplicationLayerStageLike;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic find( target: DApplicationTarget ): DApplicationLike | null {\r\n\t\tconst stage = this.toStage( target );\r\n\t\tif( stage ) {\r\n\t\t\treturn stage.layer.application;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic getLayerBase( target: DApplicationTarget ): DApplicationLayerLike | null {\r\n\t\tconst stage = this.toStage( target );\r\n\t\tif( stage ) {\r\n\t\t\treturn stage.layer.application.getLayerBase();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic getLayerOverlay( target: DApplicationTarget ): DApplicationLayerLike | null {\r\n\t\tconst stage = this.toStage( target );\r\n\t\tif( stage ) {\r\n\t\t\treturn stage.layer.application.getLayerOverlay();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic getLayer( target: DApplicationTarget ): DApplicationLayerLike | null {\r\n\t\tconst stage = this.toStage( target );\r\n\t\tif( stage ) {\r\n\t\t\treturn stage.layer;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic update( target?: DApplicationTarget ): void {\r\n\t\tif( target ) {\r\n\t\t\tconst stage = this.toStage( target );\r\n\t\t\tif( stage ) {\r\n\t\t\t\tstage.layer.update();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst instances = DApplications.INSTANCES;\r\n\t\t\tfor( let i = 0, imax = instances.length; i < imax; ++i ) {\r\n\t\t\t\tinstances[ i ].update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic render( target?: DApplicationTarget ): void {\r\n\t\tif( target ) {\r\n\t\t\tconst stage = this.toStage( target );\r\n\t\t\tif( stage ) {\r\n\t\t\t\tstage.layer.render();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst instances = DApplications.INSTANCES;\r\n\t\t\tfor( let i = 0, imax = instances.length; i < imax; ++i ) {\r\n\t\t\t\tinstances[ i ].render();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}