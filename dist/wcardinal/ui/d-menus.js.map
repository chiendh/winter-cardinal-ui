{"version":3,"file":"d-menus.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-menus.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAa,aAAa,EAAE,MAAM,SAAS,CAAC;AAQnD;IAAA;IA2EA,CAAC;IAtEO,qBAAc,GAArB,UAAuB,OAAyB;QAC/C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAE,OAAO,CAAE,CAAC;IAC/B,CAAC;IAEM,4BAAqB,GAA5B,UAA8B,OAAyB;QACtD,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;IAChC,CAAC;IAEM,qBAAc,GAArB,UAAuB,OAAyB;QAC/C,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;IAC7B,CAAC;IAEM,gBAAS,GAAhB,UACC,QAA4B,EAC5B,cAAuC,EACvC,OAAqC,EACrC,MAAe;QAEf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,EAAG;YACvD,IAAM,OAAO,GAAG,QAAQ,CAAE,CAAC,CAAE,CAAE,OAAO,EAAE,MAAM,CAAE,CAAC;YACjD,IAAI,OAAO,IAAI,IAAI,EAAG;gBACrB,OAAO,OAAO,CAAC;aACf;SACD;QACD,IAAI,cAAc,EAAG;YACpB,OAAO,cAAc,CAAE,OAAO,EAAE,MAAM,CAAE,CAAC;SACzC;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAEM,cAAO,GAAd,UAAuB,OAAqC,EAAE,MAAe;QAC5E,OAAO,IAAI,CAAC,SAAS,CAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,OAAO,EAAE,MAAM,CAAE,CAAC;IAC/E,CAAC;IAEM,iBAAU,GAAjB,UACC,OAAoG,EACpG,MAAiB,EACjB,KAA6E,EAC7E,MAAe;QAEf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,EAAG;YACpD,IAAM,IAAI,GAAG,KAAK,CAAE,CAAC,CAAE,CAAC;YACxB,IAAI,IAAI,YAAY,aAAa,EAAG;gBACnC,MAAM,CAAC,QAAQ,CAAE,IAAI,CAAE,CAAC;aACxB;iBAAM,IAAI,IAAI,IAAI,IAAI,EAAG;gBACzB,IAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAE,IAAI,EAAE,MAAM,CAAE,CAAC;gBAChD,IAAI,OAAO,IAAI,IAAI,EAAG;oBACrB,MAAM,CAAC,QAAQ,CAAE,OAAO,CAAE,CAAC;iBAC3B;qBAAM;oBACN,MAAM,IAAI,KAAK,CAAE,0CAAwC,IAAI,CAAC,SAAS,CAAE,IAAI,CAAI,CAAE,CAAC;iBACpF;aACD;SACD;IACF,CAAC;IAEM,eAAQ,GAAf,UACC,MAAiB,EACjB,KAA6E,EAC7E,MAAe;QAEf,IAAI,CAAC,UAAU,CAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,CAAE,CAAC;IAChD,CAAC;IAEM,cAAO,GAAd,UAAuB,OAA6B;QACnD,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,EAAG;YAC/B,OAAO,IAAI,CAAC,YAAY,CAAE,OAAO,CAAE,CAAC;SACpC;aAAM;YACN,MAAM,IAAI,KAAK,CAAE,wBAAwB,CAAE,CAAC;SAC5C;IACF,CAAC;IAzEgB,eAAQ,GAAuB,EAAE,CAAC;IAClC,sBAAe,GAA4B,IAAI,CAAC;IAyElE,aAAC;CAAA,AA3ED,IA2EC;SA3EY,MAAM","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { Container, DisplayObject } from \"pixi.js\";\r\nimport { DMenu, DMenuOptions } from \"./d-menu\";\r\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\r\n\r\nexport type DMenuItemCreator = ( options: DMenuItemOptionsUnion<any>, sticky: boolean ) => DisplayObject | null;\r\n\r\nexport type DMenuMenuCreator = ( options?: DMenuOptions ) => DMenu<any>;\r\n\r\nexport class DMenus {\r\n\tprotected static CREATORS: DMenuItemCreator[] = [];\r\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\r\n\tprotected static MENU_CREATOR?: DMenuMenuCreator;\r\n\r\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\r\n\t\tthis.CREATORS.push( creator );\r\n\t}\r\n\r\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\r\n\t\tthis.CREATOR_DEFAULT = creator;\r\n\t}\r\n\r\n\tstatic setMenuCreator( creator: DMenuMenuCreator ): void {\r\n\t\tthis.MENU_CREATOR = creator;\r\n\t}\r\n\r\n\tstatic newItemOf<VALUE>(\r\n\t\tcreators: DMenuItemCreator[],\r\n\t\tcreatorDefault: DMenuItemCreator | null,\r\n\t\toptions: DMenuItemOptionsUnion<VALUE>,\r\n\t\tsticky: boolean\r\n\t): DisplayObject | null {\r\n\t\tfor( let i = 0, imax = creators.length; i < imax; ++i ) {\r\n\t\t\tconst created = creators[ i ]( options, sticky );\r\n\t\t\tif( created != null ) {\r\n\t\t\t\treturn created;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( creatorDefault ) {\r\n\t\t\treturn creatorDefault( options, sticky );\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\r\n\t\treturn this.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky );\r\n\t}\r\n\r\n\tstatic newItemsOf<VALUE>(\r\n\t\tcreator: { newItem( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null },\r\n\t\tparent: Container,\r\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject | null | undefined>,\r\n\t\tsticky: boolean\r\n\t): void {\r\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\r\n\t\t\tconst item = items[ i ];\r\n\t\t\tif( item instanceof DisplayObject ) {\r\n\t\t\t\tparent.addChild( item );\r\n\t\t\t} else if( item != null ) {\r\n\t\t\t\tconst created = creator.newItem( item, sticky );\r\n\t\t\t\tif( created != null ) {\r\n\t\t\t\t\tparent.addChild( created );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error( `No matching menu item creator found: ${JSON.stringify( item )}` );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic newItems<VALUE>(\r\n\t\tparent: Container,\r\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject | null | undefined>,\r\n\t\tsticky: boolean\r\n\t): void {\r\n\t\tthis.newItemsOf( this, parent, items, sticky );\r\n\t}\r\n\r\n\tstatic newMenu<VALUE>( options?: DMenuOptions<VALUE> ): DMenu<VALUE> {\r\n\t\tif( this.MENU_CREATOR != null ) {\r\n\t\t\treturn this.MENU_CREATOR( options );\r\n\t\t} else {\r\n\t\t\tthrow new Error( \"Missing DMenu creator.\" );\r\n\t\t}\r\n\t}\r\n}\r\n"]}