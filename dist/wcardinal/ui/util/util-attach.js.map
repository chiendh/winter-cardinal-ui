{"version":3,"file":"util-attach.js","sourceRoot":"","sources":["../../../../src/main/typescript/wcardinal/ui/util/util-attach.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAUH,MAAM,CAAN,IAAY,eAKX;AALD,WAAY,eAAe;IAC1B,mDAAG,CAAA;IACH,qDAAI,CAAA;IACJ,uDAAK,CAAA;IACL,yDAAM,CAAA;AACP,CAAC,EALW,eAAe,KAAf,eAAe,QAK1B;AAED;IAAA;IAyEA,CAAC;IAxEO,iBAAM,GAAb,UACC,MAAwB,EACxB,MAAiB,EACjB,OAAe,EAAE,OAAe,EAChC,aAAqB,EAAE,cAAsB,EAC7C,KAAsB;QAEtB,IAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,QAAQ,KAAK,EAAG;YAChB,KAAK,eAAe,CAAC,IAAI;gBACxB,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,KAAK,GAAG,OAAO,CAAC;gBAClC,IAAI,CAAC,GAAG,CAAC,EAAG;oBACX,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC;oBAC3B,IAAI,aAAa,GAAG,CAAC,GAAG,KAAK,EAAG;wBAC/B,CAAC,GAAG,CAAC,CAAC;qBACN;iBACD;gBACD,CAAC,GAAG,IAAI,CAAC,MAAM,CAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE,cAAc,CAAE,CAAC;gBACrE,MAAM;YACP,KAAK,eAAe,CAAC,GAAG;gBACvB,CAAC,GAAG,IAAI,CAAC,MAAM,CAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,aAAa,CAAE,CAAC;gBACnE,CAAC,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,GAAG,OAAO,CAAC;gBAClC,IAAI,CAAC,GAAG,CAAC,EAAG;oBACX,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;oBAC5B,IAAI,cAAc,GAAG,CAAC,GAAG,MAAM,EAAG;wBACjC,CAAC,GAAG,CAAC,CAAC;qBACN;iBACD;gBACD,MAAM;YACP,KAAK,eAAe,CAAC,KAAK;gBACzB,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC;gBAC3B,IAAI,aAAa,GAAG,CAAC,GAAG,KAAK,EAAG;oBAC/B,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,KAAK,GAAG,OAAO,CAAC;oBAClC,IAAI,CAAC,GAAG,CAAC,EAAG;wBACX,CAAC,GAAG,aAAa,GAAG,KAAK,CAAC;qBAC1B;iBACD;gBACD,CAAC,GAAG,IAAI,CAAC,MAAM,CAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE,cAAc,CAAE,CAAC;gBACrE,MAAM;YACP,KAAK,eAAe,CAAC,MAAM;gBAC1B,CAAC,GAAG,IAAI,CAAC,MAAM,CAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,aAAa,CAAE,CAAC;gBACnE,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;gBAC5B,IAAI,cAAc,GAAG,CAAC,GAAG,MAAM,EAAG;oBACjC,CAAC,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,GAAG,OAAO,CAAC;oBAClC,IAAI,CAAC,GAAG,CAAC,EAAG;wBACX,CAAC,GAAG,cAAc,GAAG,MAAM,CAAC;qBAC5B;iBACD;gBACD,MAAM;SACN;QACD,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAE,CAAC,EAAE,CAAC,CAAE,CAAC;IAC7B,CAAC;IAEM,iBAAM,GAAb,UAAe,aAAqB,EAAE,cAAsB,EAAE,IAAY,EAAE,YAAoB;QAC/F,IAAI,aAAa,GAAG,CAAC,EAAG;YACvB,IAAI,YAAY,GAAG,aAAa,GAAG,IAAI,EAAG;gBACzC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC;aACnC;iBAAM;gBACN,OAAO,CAAC,CAAC;aACT;SACD;aAAM,IAAI,YAAY,GAAG,aAAa,GAAG,IAAI,EAAG;YAChD,IAAI,YAAY,GAAG,IAAI,EAAG;gBACzB,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC;aACnC;iBAAM;gBACN,OAAO,IAAI,CAAC,GAAG,CAAE,YAAY,EAAE,cAAc,CAAE,GAAG,IAAI,CAAC;aACvD;SACD;QACD,OAAO,aAAa,CAAC;IACtB,CAAC;IACF,iBAAC;AAAD,CAAC,AAzED,IAyEC","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { IPoint, Rectangle } from \"pixi.js\";\r\n\r\nexport interface UtilAttachTarget {\r\n\treadonly width: number;\r\n\treadonly height: number;\r\n\treadonly position: IPoint;\r\n}\r\n\r\nexport enum UtilAttachAlign {\r\n\tTOP,\r\n\tLEFT,\r\n\tRIGHT,\r\n\tBOTTOM\r\n}\r\n\r\nexport class UtilAttach {\r\n\tstatic attach(\r\n\t\ttarget: UtilAttachTarget,\r\n\t\tbounds: Rectangle,\r\n\t\toffsetX: number, offsetY: number,\r\n\t\tclippingWidth: number, clippingHeight: number,\r\n\t\talign: UtilAttachAlign\r\n\t): void {\r\n\t\tconst width = target.width;\r\n\t\tconst height = target.height;\r\n\t\tlet x = 0;\r\n\t\tlet y = 0;\r\n\t\tswitch( align ) {\r\n\t\tcase UtilAttachAlign.LEFT:\r\n\t\t\tx = bounds.left - width - offsetX;\r\n\t\t\tif( x < 0 ) {\r\n\t\t\t\tx = bounds.right + offsetX;\r\n\t\t\t\tif( clippingWidth < x + width ) {\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ty = this.adjust( bounds.top, bounds.bottom, height, clippingHeight );\r\n\t\t\tbreak;\r\n\t\tcase UtilAttachAlign.TOP:\r\n\t\t\tx = this.adjust( bounds.left, bounds.right, width, clippingWidth );\r\n\t\t\ty = bounds.top - height - offsetY;\r\n\t\t\tif( y < 0 ) {\r\n\t\t\t\ty = bounds.bottom + offsetY;\r\n\t\t\t\tif( clippingHeight < y + height ) {\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase UtilAttachAlign.RIGHT:\r\n\t\t\tx = bounds.right + offsetX;\r\n\t\t\tif( clippingWidth < x + width ) {\r\n\t\t\t\tx = bounds.left - width - offsetX;\r\n\t\t\t\tif( x < 0 ) {\r\n\t\t\t\t\tx = clippingWidth - width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ty = this.adjust( bounds.top, bounds.bottom, height, clippingHeight );\r\n\t\t\tbreak;\r\n\t\tcase UtilAttachAlign.BOTTOM:\r\n\t\t\tx = this.adjust( bounds.left, bounds.right, width, clippingWidth );\r\n\t\t\ty = bounds.bottom + offsetY;\r\n\t\t\tif( clippingHeight < y + height ) {\r\n\t\t\t\ty = bounds.top - height - offsetY;\r\n\t\t\t\tif( y < 0 ) {\r\n\t\t\t\t\ty = clippingHeight - height;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\ttarget.position.set( x, y );\r\n\t}\r\n\r\n\tstatic adjust( positionFirst: number, positionSecond: number, size: number, clippingSize: number ): number {\r\n\t\tif( positionFirst < 0 ) {\r\n\t\t\tif( clippingSize < positionFirst + size ) {\r\n\t\t\t\treturn (clippingSize - size) * 0.5;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if( clippingSize < positionFirst + size ) {\r\n\t\t\tif( clippingSize < size ) {\r\n\t\t\t\treturn (clippingSize - size) * 0.5;\r\n\t\t\t} else {\r\n\t\t\t\treturn Math.min( clippingSize, positionSecond ) - size;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn positionFirst;\r\n\t}\r\n}\r\n"]}