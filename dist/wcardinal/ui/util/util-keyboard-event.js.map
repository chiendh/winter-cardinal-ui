{"version":3,"file":"util-keyboard-event.js","sourceRoot":"","sources":["../../../../src/main/typescript/wcardinal/ui/util/util-keyboard-event.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DBase } from \"../d-base\";\r\nimport { isString } from \"./is-string\";\r\n\r\nexport interface UtilKeyboardEventShortcut {\r\n\talt: boolean;\r\n\tctrl: boolean;\r\n\tshift: boolean;\r\n\tkey: string;\r\n\twhich: number;\r\n\tevent?: string;\r\n}\r\n\r\nconst setShortcutKeyAndWhich = ( shortcut: UtilKeyboardEventShortcut ): UtilKeyboardEventShortcut => {\r\n\tconst key = shortcut.key;\r\n\tif( key.length <= 1 ) {\r\n\t\tif( shortcut.shift ) {\r\n\t\t\tshortcut.key = key.toUpperCase();\r\n\t\t}\r\n\t\tconst code = key.charCodeAt( 0 );\r\n\t\tif( 97 <= code && code <= 122 ) {\r\n\t\t\t// a ... z\r\n\t\t\tshortcut.which = code - 32;\r\n\t\t} else {\r\n\t\t\tshortcut.which = code;\r\n\t\t}\r\n\t} else {\r\n\t\tswitch( key ) {\r\n\t\tcase \"Enter\":\r\n\t\t\tshortcut.which = 13;\r\n\t\t\tbreak;\r\n\t\tcase \"Space\":\r\n\t\t\tshortcut.key = \" \";\r\n\t\t\tshortcut.which = 32;\r\n\t\t\tbreak;\r\n\t\tcase \"Escape\":\r\n\t\t\tshortcut.which = 27;\r\n\t\t\tbreak;\r\n\t\tcase \"F1\":\r\n\t\t\tshortcut.which = 112;\r\n\t\t\tbreak;\r\n\t\tcase \"F2\":\r\n\t\t\tshortcut.which = 113;\r\n\t\t\tbreak;\r\n\t\tcase \"F3\":\r\n\t\t\tshortcut.which = 114;\r\n\t\t\tbreak;\r\n\t\tcase \"F4\":\r\n\t\t\tshortcut.which = 115;\r\n\t\t\tbreak;\r\n\t\tcase \"F5\":\r\n\t\t\tshortcut.which = 116;\r\n\t\t\tbreak;\r\n\t\tcase \"F6\":\r\n\t\t\tshortcut.which = 117;\r\n\t\t\tbreak;\r\n\t\tcase \"F7\":\r\n\t\t\tshortcut.which = 118;\r\n\t\t\tbreak;\r\n\t\tcase \"F8\":\r\n\t\t\tshortcut.which = 119;\r\n\t\t\tbreak;\r\n\t\tcase \"F9\":\r\n\t\t\tshortcut.which = 120;\r\n\t\t\tbreak;\r\n\t\tcase \"F10\":\r\n\t\t\tshortcut.which = 121;\r\n\t\t\tbreak;\r\n\t\tcase \"F11\":\r\n\t\t\tshortcut.which = 122;\r\n\t\t\tbreak;\r\n\t\tcase \"F12\":\r\n\t\t\tshortcut.which = 123;\r\n\t\t\tbreak;\r\n\t\tcase \"CapsLock\":\r\n\t\t\tif( shortcut.shift ) {\r\n\t\t\t\tshortcut.which = 20;\r\n\t\t\t} else {\r\n\t\t\t\tshortcut.which = 240;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowUp\":\r\n\t\t\tshortcut.which = 38;\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowDown\":\r\n\t\t\tshortcut.which = 40;\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowLeft\":\r\n\t\t\tshortcut.which = 37;\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowRight\":\r\n\t\t\tshortcut.which = 39;\r\n\t\t\tbreak;\r\n\t\tcase \"Insert\":\r\n\t\t\tshortcut.which = 45;\r\n\t\t\tbreak;\r\n\t\tcase \"Delete\":\r\n\t\t\tshortcut.which = 46;\r\n\t\t\tbreak;\r\n\t\tcase \"PageUp\":\r\n\t\t\tshortcut.which = 33;\r\n\t\t\tbreak;\r\n\t\tcase \"PageDown\":\r\n\t\t\tshortcut.which = 34;\r\n\t\t\tbreak;\r\n\t\tcase \"Backspace\":\r\n\t\t\tshortcut.which = 8;\r\n\t\t\tbreak;\r\n\t\tcase \";\":\r\n\t\t\tshortcut.which = 187;\r\n\t\t\tbreak;\r\n\t\tcase \"Pause\":\r\n\t\t\tshortcut.which = 19;\r\n\t\t\tbreak;\r\n\t\tcase \"ScrollLock\":\r\n\t\t\tshortcut.which = 145;\r\n\t\t\tbreak;\r\n\t\tcase \"Tab\":\r\n\t\t\tshortcut.which = 9;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn shortcut;\r\n};\r\n\r\nexport class UtilKeyboardEvent {\r\n\tstatic isActivateKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"Space\" || e.key === \"Enter\" || e.which === 32 || e.which === 13 );\r\n\t}\r\n\r\n\tstatic isArrowUpKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"ArrowUp\" || e.which === 38 );\r\n\t}\r\n\r\n\tstatic isArrowDownKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"ArrowDown\" || e.which === 40 );\r\n\t}\r\n\r\n\tstatic isArrowLeftKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"ArrowLeft\" || e.which === 37 );\r\n\t}\r\n\r\n\tstatic isArrowRightKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"ArrowRight\" || e.which === 39 );\r\n\t}\r\n\r\n\tstatic isCancelKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"Esc\" || e.which === 27 );\r\n\t}\r\n\r\n\tstatic isFocusKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"Tab\" || e.which === 9 );\r\n\t}\r\n\r\n\tstatic isUndoKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.ctrlKey && ( e.key === \"z\" || e.which === 90 ) );\r\n\t}\r\n\r\n\tstatic isRedoKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.ctrlKey && ( e.key === \"y\" || e.which === 89 ) );\r\n\t}\r\n\r\n\tstatic isSaveKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.ctrlKey && ! e.shiftKey && ( e.key === \"s\" || e.which === 83 ) );\r\n\t}\r\n\r\n\tstatic isSaveAsKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.ctrlKey && e.shiftKey && ( e.key === \"S\" || e.which === 83 ) );\r\n\t}\r\n\r\n\tstatic isDeleteKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"Delete\" || e.which === 46 );\r\n\t}\r\n\r\n\tstatic isSelectAllKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.ctrlKey && ! e.shiftKey && ( e.key === \"a\" || e.which === 65 ) );\r\n\t}\r\n\r\n\tstatic isOkKey( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.key === \"Enter\" || e.which === 13 );\r\n\t}\r\n\r\n\tstatic getFocusDirection( e: KeyboardEvent ): boolean {\r\n\t\treturn ( e.shiftKey !== true );\r\n\t}\r\n\r\n\tstatic toShortcut( expressionOrShortcut: string | UtilKeyboardEventShortcut ): UtilKeyboardEventShortcut {\r\n\t\tif( ! isString( expressionOrShortcut ) ) {\r\n\t\t\treturn expressionOrShortcut;\r\n\t\t} else {\r\n\t\t\tconst expression = expressionOrShortcut;\r\n\t\t\tconst arrowIndex = expression.indexOf(\"->\");\r\n\t\t\tlet keyExpression: string;\r\n\t\t\tlet event: string | undefined;\r\n\t\t\tif( 0 <= arrowIndex ) {\r\n\t\t\t\tkeyExpression = expression.substring( 0, arrowIndex ).trim();\r\n\t\t\t\tevent = expression.substring( arrowIndex + 2 ).trim();\r\n\t\t\t} else {\r\n\t\t\t\tkeyExpression = expression.trim();\r\n\t\t\t}\r\n\t\t\tconst keys = keyExpression.toLowerCase().split( \"+\" );\r\n\t\t\tconst alt: boolean = 0 <= keys.indexOf( \"alt\" );\r\n\t\t\tconst ctrl: boolean = 0 <= keys.indexOf( \"ctrl\" );\r\n\t\t\tconst shift: boolean = 0 <= keys.indexOf( \"shift\" );\r\n\t\t\tconst key: string = keys[ keys.length - 1 ];\r\n\t\t\treturn setShortcutKeyAndWhich({\r\n\t\t\t\talt,\r\n\t\t\t\tctrl,\r\n\t\t\t\tshift,\r\n\t\t\t\tkey,\r\n\t\t\t\twhich: 0,\r\n\t\t\t\tevent\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tstatic toString( shortcut: UtilKeyboardEventShortcut ): string {\r\n\t\tconst parts = [];\r\n\t\tif( shortcut.ctrl ) {\r\n\t\t\tparts.push( \"Ctrl\" );\r\n\t\t}\r\n\t\tif( shortcut.shift ) {\r\n\t\t\tparts.push( \"Shift\" );\r\n\t\t}\r\n\t\tif( shortcut.alt ) {\r\n\t\t\tparts.push( \"Alt\" );\r\n\t\t}\r\n\t\tparts.push( shortcut.key.toUpperCase() );\r\n\t\treturn parts.join( \"+\" );\r\n\t}\r\n\r\n\tstatic on(\r\n\t\ttarget: DBase<any, any>,\r\n\t\texpressionOrShortcut: string | UtilKeyboardEventShortcut,\r\n\t\thandler?: ( e: KeyboardEvent ) => void\r\n\t): void {\r\n\t\tconst shortcut = this.toShortcut( expressionOrShortcut );\r\n\t\tdocument.body.addEventListener( \"keydown\", ( e: KeyboardEvent ): void => {\r\n\t\t\tif(\r\n\t\t\t\te.altKey === shortcut.alt && e.ctrlKey === shortcut.ctrl &&\r\n\t\t\t\te.shiftKey === shortcut.shift &&\r\n\t\t\t\t( e.key === shortcut.key || e.which === shortcut.which )\r\n\t\t\t) {\r\n\t\t\t\tif( target.isActionable() ) {\r\n\t\t\t\t\tif( shortcut.event != null ) {\r\n\t\t\t\t\t\ttarget.emit( shortcut.event );\r\n\t\t\t\t\t} else if( handler != null ) {\r\n\t\t\t\t\t\thandler( e );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n"]}