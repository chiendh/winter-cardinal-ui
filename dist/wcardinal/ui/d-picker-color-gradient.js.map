{"version":3,"file":"d-picker-color-gradient.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-picker-color-gradient.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { interaction, Point, Sprite, Texture } from \"pixi.js\";\r\nimport InteractionEvent = interaction.InteractionEvent;\r\nimport { DAlignWith } from \"./d-align-with\";\r\nimport { DApplications } from \"./d-applications\";\r\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\r\nimport { DBaseState } from \"./d-base-state\";\r\nimport { DInputReal } from \"./d-input-real\";\r\nimport { DPickerColor } from \"./d-picker-color\";\r\nimport { DPickerColorGradientData, DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\r\nimport { DPickerColorGradientDataView } from \"./d-picker-color-gradient-data-view\";\r\nimport { DPickerColorGradientPoint } from \"./d-picker-color-gradient-point\";\r\nimport { DPickerColorGradientRecent } from \"./d-picker-color-gradient-recent\";\r\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\r\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\r\n\r\nexport interface DPickerColorGradientOptions<\r\n\tTHEME extends DThemePickerColorGradient = DThemePickerColorGradient\r\n> extends DBaseOptions<THEME> {\r\n\r\n}\r\n\r\nexport interface DThemePickerColorGradient extends DThemeBase {\r\n\tgetGradientPointsWidth(): number;\r\n\tgetGradientPointsMargin(): number;\r\n\r\n\tgetGradientAnchorTexture(): Texture;\r\n\tgetGradientAnchorOutlinedTexture(): Texture;\r\n\tgetGradientAnchorOutlineTexture(): Texture;\r\n\r\n\tgetGradientDirectionMargin(): number;\r\n\tgetGradientDirectionTexture(): Texture;\r\n\r\n\tgetGradientRecentColumn(): number;\r\n\tgetGradientRecentWidth(): number;\r\n\tgetGradientRecentMargin(): number;\r\n\tgetGradientRecentCount(): number;\r\n\tgetGradientRecents(): DPickerColorGradientDataLike[];\r\n}\r\n\r\nexport class DPickerColorGradient<\r\n\tTHEME extends DThemePickerColorGradient = DThemePickerColorGradient,\r\n\tOPTIONS extends DPickerColorGradientOptions<THEME> = DPickerColorGradientOptions<THEME>\r\n> extends DBase<THEME, OPTIONS> {\r\n\tprotected static RECENT_COLOR_GRADIENT: DPickerColorGradientRecent | null = null;\r\n\r\n\tprotected _picker!: DPickerColor;\r\n\tprotected _view!: DPickerColorGradientDataView;\r\n\tprotected _anchors!: Sprite[];\r\n\tprotected _recent!: DPickerColorGradientRecent;\r\n\r\n\tprotected _onAnchorDownBound!: ( e: InteractionEvent ) => void;\r\n\tprotected _onAnchorMoveBound!: ( e: InteractionEvent ) => void;\r\n\tprotected _onAnchorUpBound!: ( e: InteractionEvent ) => void;\r\n\r\n\tprotected _data!: DPickerColorGradientData;\r\n\tprotected _work!: Point;\r\n\r\n\tprotected init( options?: OPTIONS ) {\r\n\t\tsuper.init( options );\r\n\r\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\r\n\r\n\t\tconst theme = this.theme;\r\n\t\tconst padding = this._padding;\r\n\t\tconst paddingTop = padding.getTop();\r\n\t\tconst paddingRight = padding.getRight();\r\n\t\tconst paddingBottom = padding.getBottom();\r\n\t\tconst paddingLeft = padding.getLeft();\r\n\t\tthis._work = new Point();\r\n\r\n\t\t// Picker\r\n\t\tconst gradientPointsWidth = theme.getGradientPointsWidth();\r\n\t\tconst gradientPointsMargin = theme.getGradientPointsMargin();\r\n\t\tconst picker = this._picker = new DPickerColor({\r\n\t\t\tx: paddingLeft + gradientPointsWidth + gradientPointsMargin,\r\n\t\t\ty: paddingTop\r\n\t\t});\r\n\t\tpicker.on( \"newcolorchange\", ( color: number ): void => {\r\n\t\t\tthis.onAnchorColorChange( color );\r\n\t\t});\r\n\t\tpicker.on( \"newalphachange\", ( alpha: number ): void => {\r\n\t\t\tthis.onAnchorAlphaChange( alpha );\r\n\t\t});\r\n\t\tthis.addChild( picker );\r\n\r\n\t\t// Points view\r\n\t\tconst view = this._view = DPickerColorGradientDataView.from( 17, 10 );\r\n\t\tview.setRectangle( 0, paddingLeft, paddingTop, gradientPointsWidth, picker.height );\r\n\t\tthis.addChild( view );\r\n\t\tview.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\r\n\t\t\tif( view.getLastHitIndex() === 0 ) {\r\n\t\t\t\tthis.onViewDown( e );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Anchor\r\n\t\tthis._onAnchorDownBound = ( e: InteractionEvent ): void => {\r\n\t\t\tthis.onAnchorDown( e );\r\n\t\t};\r\n\t\tthis._onAnchorMoveBound = ( e: InteractionEvent ): void => {\r\n\t\t\tthis.onAnchorMove( e );\r\n\t\t};\r\n\t\tthis._onAnchorUpBound = ( e: InteractionEvent ): void => {\r\n\t\t\tthis.onAnchorUp( e );\r\n\t\t};\r\n\t\tthis._anchors = [];\r\n\r\n\t\t//\r\n\t\tconst inputLabelWidth = picker.theme.getInputLabelWidth();\r\n\t\tconst inputWidth = picker.theme.getMainWidth() * 0.5;\r\n\t\tconst inputMargin = 5;\r\n\t\tconst inputDirectionMargin = theme.getGradientDirectionMargin();\r\n\t\tconst inputDirectionTexture = theme.getGradientDirectionTexture();\r\n\t\tconst inputLeft = picker.x + picker.width + inputDirectionMargin;\r\n\t\tconst inputDirection = new DInputReal({\r\n\t\t\tparent: this,\r\n\t\t\tx: inputLeft + inputLabelWidth + inputMargin,\r\n\t\t\ty: paddingTop,\r\n\t\t\twidth: inputWidth - inputLabelWidth - inputMargin,\r\n\t\t\tstep: 1,\r\n\t\t\timage: {\r\n\t\t\t\tsource: inputDirectionTexture,\r\n\t\t\t\talign: {\r\n\t\t\t\t\twith: DAlignWith.BORDER\r\n\t\t\t\t},\r\n\t\t\t\tmargin: {\r\n\t\t\t\t\thorizontal: -inputDirectionTexture.width - inputMargin\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ton: {\r\n\t\t\t\tchange: ( value: number ) => {\r\n\t\t\t\t\t(this._data as any)._direction = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Recent gradients\r\n\t\tconst recentColumn = theme.getGradientRecentColumn();\r\n\t\tconst recentWidth = theme.getGradientRecentWidth();\r\n\t\tconst recentMargin = theme.getGradientRecentMargin();\r\n\t\tconst recentWidthAndMargin = recentWidth + recentMargin;\r\n\t\tconst x0 = inputLeft;\r\n\t\tconst y0 = inputDirection.y + inputDirection.height + inputDirectionMargin;\r\n\t\tif( DPickerColorGradient.RECENT_COLOR_GRADIENT == null ) {\r\n\t\t\tDPickerColorGradient.RECENT_COLOR_GRADIENT = new DPickerColorGradientRecent(\r\n\t\t\t\ttheme.getGradientRecents(),\r\n\t\t\t\ttheme.getGradientRecentCount()\r\n\t\t\t);\r\n\t\t}\r\n\t\tthis._recent = DPickerColorGradient.RECENT_COLOR_GRADIENT;\r\n\t\tconst recent = this._recent;\r\n\t\tfor( let i = 0, imax = recent.getCapacity(); i < imax; ++i ) {\r\n\t\t\tconst ix = i % recentColumn;\r\n\t\t\tconst x = x0 + ix * recentWidthAndMargin;\r\n\t\t\tconst iy = (i / recentColumn) | 0;\r\n\t\t\tconst y = y0 + iy * recentWidthAndMargin;\r\n\t\t\tview.setRectangle( 1 + i, x, y, recentWidth, recentWidth );\r\n\t\t}\r\n\t\trecent.on( \"change\", (): void => {\r\n\t\t\tthis.onRecentUpdate();\r\n\t\t});\r\n\t\tUtilPointerEvent.onClick( view, ( e: InteractionEvent ): void => {\r\n\t\t\tconst lastHitIndex = view.getLastHitIndex();\r\n\t\t\tif( 1 <= lastHitIndex ) {\r\n\t\t\t\tthis.onRecentClick( view.getData( lastHitIndex ) );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Points\r\n\t\tconst data = this._data = new DPickerColorGradientData();\r\n\t\tdata.on( \"change\", (): void => {\r\n\t\t\tthis.updateAnchors();\r\n\t\t\tview.update();\r\n\t\t});\r\n\t\tdata.on( \"selectionchange\", ( point: DPickerColorGradientPoint ): void => {\r\n\t\t\tthis.onAnchorSelect( point );\r\n\t\t});\r\n\t\tdata.on( \"directionchange\", ( value: number ): void => {\r\n\t\t\tinputDirection.value = value;\r\n\t\t});\r\n\t\tview.setData( 0, data );\r\n\t\tview.update();\r\n\t\tinputDirection.value = data.direction;\r\n\t\tthis.updateAnchors();\r\n\t\tconst selected = data.selected;\r\n\t\tif( selected != null ) {\r\n\t\t\tthis.onAnchorSelect( selected );\r\n\t\t}\r\n\r\n\t\t// Width\r\n\t\tif( options == null || options.width == null ) {\r\n\t\t\tthis.width = paddingLeft + gradientPointsWidth + gradientPointsMargin +\r\n\t\t\t\tpicker.width + inputDirectionMargin + (recentColumn - 1) * recentMargin +\r\n\t\t\t\trecentColumn * recentWidth + paddingRight;\r\n\t\t}\r\n\r\n\t\t// Height\r\n\t\tif( options == null || options.height == null ) {\r\n\t\t\tthis.height = paddingTop + picker.height + paddingBottom;\r\n\t\t}\r\n\t}\r\n\r\n\tget data(): DPickerColorGradientData {\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\tget recent() {\r\n\t\treturn this._recent;\r\n\t}\r\n\r\n\tprotected onRecentClick( recentData: DPickerColorGradientDataLike | null ) {\r\n\t\tconst data = this._data;\r\n\t\tif( recentData != null ) {\r\n\t\t\tdata.fromObject( recentData );\r\n\t\t} else {\r\n\t\t\tdata.reset();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onRecentUpdate() {\r\n\t\tconst recent = this._recent;\r\n\t\tconst view = this._view;\r\n\t\tfor( let i = 0, imax = recent.size(); i < imax; ++i ) {\r\n\t\t\tview.setData( 1 + i, recent.get( i ) );\r\n\t\t}\r\n\t\tview.update();\r\n\t\tDApplications.update( this );\r\n\t}\r\n\r\n\tprotected toAnchorPosition( e: InteractionEvent ) {\r\n\t\tconst local = this.toLocal( e.data.global, undefined, this._work );\r\n\t\treturn Math.max( 0, Math.min( 1, (local.y - this.padding.getTop()) / this._picker.height ) );\r\n\t}\r\n\r\n\tprotected onViewDown( e: InteractionEvent ) {\r\n\t\tthis._data.addAt( this.toAnchorPosition( e ) );\r\n\t\tthis.onAnchorDragStart();\r\n\t}\r\n\r\n\tprotected onAnchorDown( e: InteractionEvent ) {\r\n\t\tconst target = e.target;\r\n\t\tif( target instanceof Sprite ) {\r\n\t\t\tconst data = this._data;\r\n\t\t\tconst index = this._anchors.indexOf( target );\r\n\t\t\tif( 0 <= index && index < data.points.length ) {\r\n\t\t\t\tdata.points[ index ].selected = true;\r\n\t\t\t\tthis.onAnchorDragStart();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onAnchorSelect( point: DPickerColorGradientPoint ) {\r\n\t\tconst picker = this._picker;\r\n\t\tpicker.current.color = point.color;\r\n\t\tpicker.current.alpha = point.alpha;\r\n\t\tpicker.new.color = point.color;\r\n\t\tpicker.new.alpha = point.alpha;\r\n\t}\r\n\r\n\tprotected onAnchorColorChange( color: number ) {\r\n\t\tconst points = this._data;\r\n\t\tif( points != null ) {\r\n\t\t\tconst selected = points.selected;\r\n\t\t\tif( selected != null ) {\r\n\t\t\t\tselected.color = color;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onAnchorAlphaChange( alpha: number ) {\r\n\t\tconst points = this._data;\r\n\t\tif( points != null ) {\r\n\t\t\tconst selected = points.selected;\r\n\t\t\tif( selected != null ) {\r\n\t\t\t\tselected.alpha = alpha;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onAnchorDragStart() {\r\n\t\tconst layer = DApplications.getLayer( this );\r\n\t\tif( layer ) {\r\n\t\t\tconst stage = layer.stage;\r\n\t\t\tstage.on( UtilPointerEvent.move, this._onAnchorMoveBound );\r\n\t\t\tstage.on( UtilPointerEvent.up, this._onAnchorUpBound );\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onAnchorMove( e: InteractionEvent ): void {\r\n\t\tconst points = this._data;\r\n\t\tif( points != null ) {\r\n\t\t\tconst selected = points.selected;\r\n\t\t\tif( selected != null ) {\r\n\t\t\t\tselected.position = this.toAnchorPosition( e );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onAnchorUp( e: InteractionEvent ): void {\r\n\t\tconst layer = DApplications.getLayer( this );\r\n\t\tif( layer ) {\r\n\t\t\tconst stage = layer.stage;\r\n\t\t\tstage.off( UtilPointerEvent.move, this._onAnchorMoveBound );\r\n\t\t\tstage.off( UtilPointerEvent.up, this._onAnchorUpBound );\r\n\t\t}\r\n\t}\r\n\r\n\tprotected updateAnchors() {\r\n\t\tconst theme = this.theme;\r\n\t\tconst anchorTexture = theme.getGradientAnchorTexture();\r\n\t\tconst anchorOutlinedTexture = theme.getGradientAnchorOutlinedTexture();\r\n\t\tconst gradientPointsWidth = theme.getGradientPointsWidth();\r\n\r\n\t\tconst data = this._data;\r\n\t\tconst pointSize = data.points.length;\r\n\r\n\t\tconst anchors = this._anchors;\r\n\t\tconst anchorSize = anchors.length;\r\n\t\tfor( let i = anchorSize; i < pointSize; ++i ) {\r\n\t\t\tconst newAnchor = new Sprite( anchorTexture );\r\n\t\t\tnewAnchor.anchor.set( 0.5, 0.5 );\r\n\t\t\tnewAnchor.cursor = \"pointer\";\r\n\t\t\tnewAnchor.interactive = true;\r\n\t\t\tnewAnchor.on( UtilPointerEvent.down, this._onAnchorDownBound );\r\n\t\t\tanchors.push( newAnchor );\r\n\t\t\tthis.addChild( newAnchor );\r\n\t\t}\r\n\r\n\t\tfor( let i = anchorSize - 1; pointSize <= i; --i ) {\r\n\t\t\tconst oldAnchor = anchors[ i ];\r\n\t\t\toldAnchor.off( UtilPointerEvent.down, this._onAnchorDownBound );\r\n\t\t\toldAnchor.destroy();\r\n\t\t}\r\n\t\tanchors.length = pointSize;\r\n\r\n\t\tconst y = this.padding.getTop();\r\n\t\tconst right = this.padding.getLeft() + gradientPointsWidth;\r\n\t\tconst height = this._picker.height;\r\n\t\tfor( let i = 0; i < pointSize; ++i ) {\r\n\t\t\tconst point = data.points[ i ];\r\n\t\t\tconst anchor = anchors[ i ];\r\n\t\t\tanchor.tint = point.color;\r\n\t\t\tanchor.position.set(\r\n\t\t\t\tright,\r\n\t\t\t\ty + height * point.position\r\n\t\t\t);\r\n\t\t\tanchor.texture = (point.selected ? anchorOutlinedTexture : anchorTexture);\r\n\t\t}\r\n\r\n\t\tDApplications.update( this );\r\n\t}\r\n\r\n\tonKeyDown( e: KeyboardEvent ): boolean {\r\n\t\tif( UtilKeyboardEvent.isDeleteKey( e ) ) {\r\n\t\t\tconst points = this._data;\r\n\t\t\tif( points != null ) {\r\n\t\t\t\tconst selected = points.selected;\r\n\t\t\t\tif( selected != null ) {\r\n\t\t\t\t\tpoints.remove( selected );\r\n\t\t\t\t\tsuper.onKeyDown( e );\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onKeyDown( e );\r\n\t}\r\n\r\n\tprotected getType(): string {\r\n\t\treturn \"DPickerColorGradient\";\r\n\t}\r\n}\r\n"]}