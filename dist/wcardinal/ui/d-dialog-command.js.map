{"version":3,"file":"d-dialog-command.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-dialog-command.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DButton } from \"./d-button\";\r\nimport { DButtonPrimary } from \"./d-button-primary\";\r\nimport { DCoordinatePosition, DCoordinateSize } from \"./d-coordinate\";\r\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\r\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\r\nimport { DLayoutSpace } from \"./d-layout-space\";\r\nimport { DLayoutVertical } from \"./d-layout-vertical\";\r\n\r\nexport interface DDialogCommandOptions<\r\n\tTHEME extends DThemeDialogCommand = DThemeDialogCommand\r\n> extends DDialogOptions<THEME> {\r\n\tok?: string;\r\n\tcancel?: string;\r\n}\r\n\r\nexport interface DThemeDialogCommand extends DThemeDialog {\r\n\tgetOk(): string | null;\r\n\tgetCancel(): string | null;\r\n\tgetLayoutX(): DCoordinatePosition;\r\n\tgetLayoutY(): DCoordinatePosition;\r\n\tgetLayoutWidth(): DCoordinateSize;\r\n\tgetLayoutHeight(): DCoordinateSize;\r\n}\r\n\r\nexport class DDialogCommand<\r\n\tTHEME extends DThemeDialogCommand = DThemeDialogCommand,\r\n\tOPTIONS extends DDialogCommandOptions<THEME> = DDialogCommandOptions<THEME>\r\n> extends DDialog<THEME, OPTIONS> {\r\n\tprotected _promise: Promise<void> | null = null;\r\n\tprotected _resolve: (() => void) | null = null;\r\n\tprotected _reject: (() => void) | null = null;\r\n\tprotected _buttonLayout?: DLayoutHorizontal;\r\n\tprotected _buttonOk?: DButton;\r\n\tprotected _buttonCancel?: DButton;\r\n\r\n\tprotected init( options?: OPTIONS ) {\r\n\t\tsuper.init( options );\r\n\r\n\t\tconst theme = this.theme;\r\n\t\tconst layout = new DLayoutVertical({\r\n\t\t\tparent: this,\r\n\t\t\tx: theme.getLayoutX(),\r\n\t\t\ty: theme.getLayoutY(),\r\n\t\t\twidth: theme.getLayoutWidth(),\r\n\t\t\theight: theme.getLayoutHeight()\r\n\t\t});\r\n\r\n\t\tthis.onInit( layout, options );\r\n\r\n\t\t// Buttons\r\n\t\tconst ok = ( options && options.ok || theme.getOk() );\r\n\t\tconst cancel = ( options && options.cancel || theme.getCancel() );\r\n\t\tif( ok != null || cancel != null ) {\r\n\t\t\tconst buttonLayout = new DLayoutHorizontal({\r\n\t\t\t\tparent: layout,\r\n\t\t\t\twidth: \"padding\", height: \"auto\",\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\ttop: this.padding.getTop()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._buttonLayout = buttonLayout;\r\n\t\t\tnew DLayoutSpace({\r\n\t\t\t\tparent: buttonLayout,\r\n\t\t\t\tweight: 1\r\n\t\t\t});\r\n\t\t\tif( ok != null && cancel != null ) {\r\n\t\t\t\tthis._buttonCancel = new DButtonPrimary({\r\n\t\t\t\t\tparent: buttonLayout,\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tvalue: cancel\r\n\t\t\t\t\t},\r\n\t\t\t\t\ton: {\r\n\t\t\t\t\t\tactive: (): void => {\r\n\t\t\t\t\t\t\tthis.onCancel();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis._buttonOk = new DButton({\r\n\t\t\t\t\tparent: buttonLayout,\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tvalue: ok\r\n\t\t\t\t\t},\r\n\t\t\t\t\ton: {\r\n\t\t\t\t\t\tactive: (): void => {\r\n\t\t\t\t\t\t\tthis.onOk();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if( ok != null ) {\r\n\t\t\t\tthis._buttonOk = new DButtonPrimary({\r\n\t\t\t\t\tparent: buttonLayout,\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tvalue: ok\r\n\t\t\t\t\t},\r\n\t\t\t\t\ton: {\r\n\t\t\t\t\t\tactive: (): void => {\r\n\t\t\t\t\t\t\tthis.onOk();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if( cancel != null ) {\r\n\t\t\t\tthis._buttonCancel = new DButtonPrimary({\r\n\t\t\t\t\tparent: buttonLayout,\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tvalue: cancel\r\n\t\t\t\t\t},\r\n\t\t\t\t\ton: {\r\n\t\t\t\t\t\tactive: (): void => {\r\n\t\t\t\t\t\t\tthis.onCancel();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tnew DLayoutSpace({\r\n\t\t\t\tparent: buttonLayout,\r\n\t\t\t\tweight: 1\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\r\n\t\t// OVERRIDE THIS\r\n\t}\r\n\r\n\topen(): Promise<void> {\r\n\t\tsuper.open();\r\n\t\treturn this._promise!;\r\n\t}\r\n\r\n\tprotected onOpen() {\r\n\t\tsuper.onOpen();\r\n\r\n\t\tif( this._promise == null ) {\r\n\t\t\tthis._promise = new Promise(( resolve, reject ): void => {\r\n\t\t\t\tthis._resolve = resolve;\r\n\t\t\t\tthis._reject = reject;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onClose() {\r\n\t\tsuper.onClose();\r\n\r\n\t\tconst reject = this._reject;\r\n\t\tthis._promise = null;\r\n\t\tthis._resolve = null;\r\n\t\tthis._reject = null;\r\n\r\n\t\tif( reject != null ) {\r\n\t\t\treject();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onOk() {\r\n\t\tconst resolve = this._resolve;\r\n\t\tthis._promise = null;\r\n\t\tthis._resolve = null;\r\n\t\tthis._reject = null;\r\n\r\n\t\tthis.close();\r\n\r\n\t\tif( resolve != null ) {\r\n\t\t\tresolve();\r\n\t\t}\r\n\r\n\t\tthis.emit( \"ok\", this );\r\n\t}\r\n\r\n\tprotected onCancel() {\r\n\t\tconst reject = this._reject;\r\n\t\tthis._promise = null;\r\n\t\tthis._resolve = null;\r\n\t\tthis._reject = null;\r\n\r\n\t\tthis.close();\r\n\r\n\t\tif( reject != null ) {\r\n\t\t\treject();\r\n\t\t}\r\n\r\n\t\tthis.emit( \"cancel\", this );\r\n\t}\r\n\r\n\tprotected getType(): string {\r\n\t\treturn \"DDialogCommand\";\r\n\t}\r\n}\r\n"]}