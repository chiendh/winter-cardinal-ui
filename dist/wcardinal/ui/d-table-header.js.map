{"version":3,"file":"d-table-header.js","sourceRoot":"","sources":["../../../src/main/typescript/wcardinal/ui/d-table-header.ts"],"names":[],"mappings":"AAAA;;;GAGG;;AAKH,OAAO,EAAE,gBAAgB,EAA2B,MAAM,uBAAuB,CAAC;AAClF,OAAO,EAAE,SAAS,EAAoC,MAAM,eAAe,CAAC;AAmB5E;IAIU,gCAAiD;IAI1D,sBAAa,OAAgB;eAC5B,kBAAO,OAAO,CAAE;IACjB,CAAC;IAES,2BAAI,GAAd,UAAgB,OAAgB;;QAC/B,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC;QACpC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,OAAO,SAAG,OAAO,CAAC,MAAM,mCAAI,CAAC,CAAC;QACnC,iBAAM,IAAI,YAAE,OAAO,CAAE,CAAC;IACvB,CAAC;IAED,sBAAI,+BAAK;aAAT;YACC,OAAO,IAAI,CAAC,MAAM,CAAC;QACpB,CAAC;;;OAAA;IAED,mCAAY,GAAZ,UAAc,CAAS,EAAE,CAAS;QACjC,iBAAM,YAAY,YAAE,CAAC,EAAE,CAAC,CAAE,CAAC;QAC3B,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;QAC9C,IAAI,CAAC,wBAAwB,CAAE,CAAC,CAAE,CAAC;IACpC,CAAC;IAES,0CAAmB,GAA7B;QACC,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QAC5B,IAAI,OAAO,EAAG;YACb,OAAO,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;SAC1B;QACD,OAAO,CAAC,CAAC;IACV,CAAC;IAES,8BAAO,GAAjB,UACC,MAAyB,EACzB,WAAmB,EACnB,OAAiC,EACjC,OAAgB;QAEhB,OAAO,IAAI,gBAAgB,CAAO,IAAI,CAAC,aAAa,CAAE,MAAM,EAAE,OAAO,CAAE,CAAE,CAAC;IAC3E,CAAC;IAES,oCAAa,GAAvB,UACC,MAAyB,EACzB,OAAgB;QAEhB,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC;QAC7C,IAAI,MAAM,IAAI,IAAI,EAAG;YACpB,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAG;gBACjC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;aAC9B;YACD,IAAI,MAAM,CAAC,KAAK,KAAK,SAAS,EAAG;gBAChC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;aAC5B;YACD,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAG;gBAC/B,MAAM,CAAC,IAAI,GAAG;oBACb,KAAK,EAAE,MAAM,CAAC,KAAK;iBACnB,CAAC;aACF;iBAAM,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,SAAS,EAAG;gBAC5C,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;aACjC;YACD,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAG;gBACjC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;aACrB;YACD,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAG;gBACjC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;aACvB;YACD,OAAO,MAAM,CAAC;SACd;aAAM;YACN,OAAO;gBACN,MAAM,EAAE,MAAM,CAAC,MAAM;gBACrB,KAAK,EAAE,MAAM,CAAC,KAAK;gBACnB,IAAI,EAAE;oBACL,KAAK,EAAE,MAAM,CAAC,KAAK;iBACnB;gBACD,MAAM,EAAE,IAAI;gBACZ,MAAM,QAAA;aACN,CAAC;SACF;IACF,CAAC;IAES,8BAAO,GAAjB;QACC,OAAO,cAAc,CAAC;IACvB,CAAC;IACF,mBAAC;AAAD,CAAC,AAxFD,CAIU,SAAS,GAoFlB","sourcesContent":["/*\r\n * Copyright (C) 2019 Toshiba Corporation\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport { DBase } from \"./d-base\";\r\nimport { DTableColumn } from \"./d-table-column\";\r\nimport { DTableData } from \"./d-table-data\";\r\nimport { DTableHeaderCell, DTableHeaderCellOptions } from \"./d-table-header-cell\";\r\nimport { DTableRow, DTableRowOptions, DThemeTableRow } from \"./d-table-row\";\r\n\r\nexport interface DTableHeaderTable<ROW> {\r\n\treadonly data: DTableData<ROW>;\r\n}\r\n\r\nexport interface DTableHeaderOptions<\r\n\tROW,\r\n\tTHEME extends DThemeTableHeader = DThemeTableHeader\r\n> extends DTableRowOptions<ROW, DTableColumn<ROW>, THEME> {\r\n\ttable?: DTableHeaderTable<ROW>;\r\n\toffset?: number;\r\n\tcell?: DTableHeaderCellOptions<ROW>;\r\n}\r\n\r\nexport interface DThemeTableHeader extends DThemeTableRow {\r\n\r\n}\r\n\r\nexport class DTableHeader<\r\n\tROW,\r\n\tTHEME extends DThemeTableHeader = DThemeTableHeader,\r\n\tOPTIONS extends DTableHeaderOptions<ROW, THEME> = DTableHeaderOptions<ROW, THEME>\r\n> extends DTableRow<ROW, DTableColumn<ROW>, THEME, OPTIONS> {\r\n\tprotected _table!: DTableHeaderTable<ROW> | null;\r\n\tprotected _offset!: number;\r\n\r\n\tconstructor( options: OPTIONS ) {\r\n\t\tsuper( options );\r\n\t}\r\n\r\n\tprotected init( options: OPTIONS ) {\r\n\t\tthis._table = options.table || null;\r\n\t\tthis._offset = this.transform.position.y = options.offset || 0;\r\n\t\tthis._frozen = options.frozen ?? 0;\r\n\t\tsuper.init( options );\r\n\t}\r\n\r\n\tget table(): DTableHeaderTable<ROW> | null {\r\n\t\treturn this._table;\r\n\t}\r\n\r\n\tonParentMove( x: number, y: number ): void {\r\n\t\tsuper.onParentMove( x, y );\r\n\t\tthis.transform.position.y = -y + this._offset;\r\n\t\tthis.updateFrozenCellPosition( x );\r\n\t}\r\n\r\n\tprotected getContentPositionX(): number {\r\n\t\tconst content = this.parent;\r\n\t\tif( content ) {\r\n\t\t\treturn content.position.x;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tprotected newCell(\r\n\t\tcolumn: DTableColumn<ROW>,\r\n\t\tcolumnIndex: number,\r\n\t\tcolumns: Array<DTableColumn<ROW>>,\r\n\t\toptions: OPTIONS\r\n\t): DBase {\r\n\t\treturn new DTableHeaderCell<ROW>( this.toCellOptions( column, options ) );\r\n\t}\r\n\r\n\tprotected toCellOptions(\r\n\t\tcolumn: DTableColumn<ROW>,\r\n\t\toptions: OPTIONS\r\n\t): DTableHeaderCellOptions<ROW> {\r\n\t\tconst result = column.header || options.cell;\r\n\t\tif( result != null ) {\r\n\t\t\tif( result.weight === undefined ) {\r\n\t\t\t\tresult.weight = column.weight;\r\n\t\t\t}\r\n\t\t\tif( result.width === undefined ) {\r\n\t\t\t\tresult.width = column.width;\r\n\t\t\t}\r\n\t\t\tif( result.text === undefined ) {\r\n\t\t\t\tresult.text = {\r\n\t\t\t\t\tvalue: column.label\r\n\t\t\t\t};\r\n\t\t\t} else if( result.text.value === undefined ) {\r\n\t\t\t\tresult.text.value = column.label;\r\n\t\t\t}\r\n\t\t\tif( result.header === undefined ) {\r\n\t\t\t\tresult.header = this;\r\n\t\t\t}\r\n\t\t\tif( result.column === undefined ) {\r\n\t\t\t\tresult.column = column;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tweight: column.weight,\r\n\t\t\t\twidth: column.width,\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tvalue: column.label\r\n\t\t\t\t},\r\n\t\t\t\theader: this,\r\n\t\t\t\tcolumn\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tprotected getType(): string {\r\n\t\treturn \"DTableHeader\";\r\n\t}\r\n}\r\n"]}